# ===================================
# تكوين خادم Coturn للغرف الصوتية
# ===================================

# إعدادات الشبكة الأساسية
listening-port=3478
tls-listening-port=5349
alt-listening-port=3479
alt-tls-listening-port=5350

# عناوين IP - استبدل بعناوينك الفعلية
listening-ip=0.0.0.0
# relay-ip=YOUR_PRIVATE_IP
# external-ip=YOUR_PUBLIC_IP/YOUR_PRIVATE_IP

# نطاق المنافذ للـ relay (مهم للصوت والفيديو)
min-port=49152
max-port=65535

# ===================================
# إعدادات الأمان
# ===================================

# تفعيل البصمة للأمان
fingerprint

# استخدام المصادقة بكلمة سر ثابتة
use-auth-secret

# كلمة السر السرية - قم بتغييرها!
# يمكن توليدها باستخدام: openssl rand -hex 32
static-auth-secret=a3f4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b9c0d1e2f3a4

# اسم النطاق
realm=turn.yourdomain.com
server-name=turn.yourdomain.com

# ===================================
# شهادات SSL/TLS
# ===================================

# مسارات الشهادات - قم بتحديثها بمساراتك
cert=/etc/coturn/certs/fullchain.pem
pkey=/etc/coturn/certs/privkey.pem

# خوارزميات التشفير
# cipher-list="ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384"

# ===================================
# إعدادات الأداء
# ===================================

# الحد الأقصى للاتصالات
total-quota=1000

# الحد الأقصى لعرض النطاق لكل جلسة (بت/ثانية)
max-bps=1000000

# سعة عرض النطاق الإجمالية (0 = غير محدود)
bps-capacity=0

# مهلة انتهاء nonce (بالثواني)
stale-nonce=600

# حجم تجمع العمليات
# cli-max-output-sessions=1000

# ===================================
# إعدادات السجلات
# ===================================

# ملف السجل
log-file=/var/log/turnserver/turnserver.log

# مستوى التفصيل
verbose

# سجلات بسيطة (أسهل للقراءة)
simple-log

# تدوير السجلات
# log-file-size-max=100

# ===================================
# إعدادات متقدمة
# ===================================

# منع multicast
no-multicast-peers

# تعطيل واجهة CLI (لأسباب أمنية)
no-cli

# تعطيل الإصدارات القديمة من TLS
no-tlsv1
no-tlsv1_1

# السماح بـ loopback للاختبار المحلي
# allow-loopback-peers

# تفعيل الإحصائيات عبر Redis (اختياري)
# redis-statsdb="ip=127.0.0.1 dbname=2 port=6379 connect_timeout=30"

# ===================================
# إعدادات خاصة بالصوت
# ===================================

# تحسينات للصوت عالي الجودة
# تفعيل DTLS للأمان الإضافي
# dtls-mtu=1200

# معدل التحديث للإحصائيات
# cli-stats-update-interval=600

# ===================================
# قواعد الوصول (اختياري)
# ===================================

# السماح فقط من عناوين IP محددة
# denied-peer-ip=0.0.0.0-255.255.255.255
# allowed-peer-ip=192.168.1.0-192.168.1.255

# حظر عناوين معينة
# denied-peer-ip=10.0.0.0-10.255.255.255

# ===================================
# نهاية الملف
# ===================================