
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

[dotenv@17.2.1] injecting env (3) from .env -- tip: âš™ï¸  override existing env vars with { override: true }
The `fetchConnectionCache` option is deprecated (now always `true`)
âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª PostgreSQL Ø¨Ù†Ø¬Ø§Ø­
[dotenv@17.2.1] injecting env (0) from .env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
[7:11:49 PM] [express] ğŸŒ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: development
[7:11:49 PM] [express] ğŸ”§ Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±ØŒ ØªÙØ¹ÙŠÙ„ Vite
[7:11:49 PM] [express] ğŸ—„ï¸ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ migrations Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
{
  severity_local: 'NOTICE',
  severity: 'NOTICE',
  code: '42P06',
  message: 'schema "drizzle" already exists, skipping',
  file: 'schemacmds.c',
  line: '132',
  routine: 'CreateSchemaCommand'
}
{
  severity_local: 'NOTICE',
  severity: 'NOTICE',
  code: '42P07',
  message: 'relation "__drizzle_migrations" already exists, skipping',
  file: 'parse_utilcmd.c',
  line: '207',
  routine: 'transformCreateStmt'
}
âŒ Error running migrations: DrizzleQueryError: Failed query: CREATE TABLE "room_users" (
	"id" serial PRIMARY KEY NOT NULL,
	"user_id" integer NOT NULL,
	"room_id" text NOT NULL,
	"joined_at" timestamp DEFAULT now()
);

params: 
    at PostgresJsPreparedQuery.queryWithCache (/workspace/node_modules/src/pg-core/session.ts:74:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (/workspace/node_modules/src/pg-core/dialect.ts:102:7)
    at async scope (file:///workspace/node_modules/postgres/src/index.js:260:18)
    at async Function.begin (file:///workspace/node_modules/postgres/src/index.js:243:14)
    at async PgDialect.migrate (/workspace/node_modules/src/pg-core/dialect.ts:95:3)
    at async migrate (/workspace/node_modules/src/postgres-js/migrator.ts:10:2)
    at async runMigrations (/workspace/server/database-setup.ts:63:5)
    at async <anonymous> (/workspace/server/index.ts:266:7) {
  query: 'CREATE TABLE "room_users" (\n' +
    '\t"id" serial PRIMARY KEY NOT NULL,\n' +
    '\t"user_id" integer NOT NULL,\n' +
    '\t"room_id" text NOT NULL,\n' +
    '\t"joined_at" timestamp DEFAULT now()\n' +
    ');\n',
  params: [],
  cause: PostgresError: relation "room_users" already exists
      at ErrorResponse (file:///workspace/node_modules/postgres/src/connection.js:794:26)
      at handle (file:///workspace/node_modules/postgres/src/connection.js:480:6)
      at Socket.data (file:///workspace/node_modules/postgres/src/connection.js:315:9)
      at Socket.emit (node:events:518:28)
      at addChunk (node:internal/streams/readable:561:12)
      at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
      at Readable.push (node:internal/streams/readable:392:5)
      at TCP.onStreamRead (node:internal/stream_base_commons:189:23) {
    severity_local: 'ERROR',
    severity: 'ERROR',
    code: '42P07',
    file: 'heap.c',
    line: '1159',
    routine: 'heap_create_with_catalog'
  }
}
âš ï¸ Falling back to SQLite mode
[7:11:50 PM] [express] âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ migrations Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­
[7:11:50 PM] [express] ğŸ”„ ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
[2025-08-05T19:11:50.867Z] INFO: ğŸ”„ Initializing database tables...
ğŸ”§ Checking for missing columns...
âœ… Added missing role column
âœ… Missing columns check completed
âœ… Owner already exists
[7:11:53 PM] [express] âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
[7:11:53 PM] [express] ğŸ” ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù†ÙØ° Ù„Ù„Ø®Ø§Ø¯Ù…: 3000...
[7:11:53 PM] [express] âš ï¸ Ø§Ù„Ù…Ù†ÙØ° 3000 Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¹ 3001
[7:11:53 PM] [express] âš ï¸ Ø§Ù„Ù…Ù†ÙØ° 3000 ØºÙŠØ± Ù…ØªØ§Ø­ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… 3001
[7:11:53 PM] [express] ğŸš€ Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù„Ù‰:
[7:11:53 PM] [express]    ğŸ“¡ Ø§Ù„Ù…Ø¶ÙŠÙ: http://localhost:3001
[7:11:53 PM] [express]    ğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: http://0.0.0.0:3001
[7:11:53 PM] [express]    ğŸ”Œ Socket.IO: Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ /socket.io/
[7:11:53 PM] [express]    ğŸ“Š ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: http://localhost:3001/api/health
