# ุชุญุณููุงุช Socket.IO ุงููุทุจูุฉ

## ๐ ุงูุชุญุณููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู (Server)
- **ุชูููู ุฃููุงุช ุงูุงุณุชุฌุงุจุฉ**: 
  - `pingTimeout`: 60s ูู ุงูุฅูุชุงุฌุ 30s ูู ุงูุชุทููุฑ (ุจุฏูุงู ูู 180s)
  - `pingInterval`: 25s ูู ุงูุฅูุชุงุฌุ 15s ูู ุงูุชุทููุฑ (ุจุฏูุงู ูู 45s)
  - `upgradeTimeout`: 30s (ุจุฏูุงู ูู 45s)

- **ุชุญุณูู ุงูุถุบุท**:
  - ุชูุนูู `perMessageDeflate` ูุน ุถุบุท ุฐูู ููุฑุณุงุฆู > 1KB
  - ุชุญุณูู `memLevel` ูุชูููุฑ ุงูุฐุงูุฑุฉ
  - ุชูุนูู `httpCompression`

- **ุชุญุณูู ุฅุฏุงุฑุฉ ุงูุงุชุตุงูุงุช**:
  - ุชูููู `maxHttpBufferSize` ุฅูู 5MB
  - ุชูุนูู `cleanupEmptyChildNamespaces`
  - ุฅุถุงูุฉ `connectTimeout` ููุงุชุตุงู ุงูุฃููู

### 2. ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงูุนููู (Client)
- **ุชุญุณูู ุฅุนุงุฏุฉ ุงูุงุชุตุงู**:
  - ูุญุงููุงุช ูุญุฏูุฏุฉ (10 ูู ุงูุฅูุชุงุฌุ 5 ูู ุงูุชุทููุฑ)
  - ุชูููู `reconnectionDelay` ู `reconnectionDelayMax`
  - ุชูููู `randomizationFactor` ูุงุชุตุงู ุฃุณุฑุน

- **ุชุญุณูู ุงูุฃุฏุงุก**:
  - `forceNew: false` ูุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุงุชุตุงูุงุช
  - `rememberUpgrade: true` ูุชุฐูุฑ ุงูุชุฑููุงุช ุงููุงุฌุญุฉ
  - `multiplex: true` ููุฃุฏุงุก ุงูุฃูุถู
  - `forceBase64: false` ูุงุณุชุฎุฏุงู binary

- **ูุนูููุงุช ุชุดุฎูุตูุฉ**:
  - ุฅุถุงูุฉ ูุนูููุงุช ุงููุชุตูุญ ูุฏูุฉ ุงูุดุงุดุฉ
  - ูุนูููุงุช ููุน ุงูุงุชุตุงู ููุชุดุฎูุต

### 3. ูุธุงู ูุฑุงูุจุฉ ุงูุฃุฏุงุก
- **ูุฑุงูุจุฉ ุดุงููุฉ**: `SocketPerformanceMonitor`
  - ุชุชุจุน ุนุฏุฏ ุงูุงุชุตุงูุงุช ูุงูุฑุณุงุฆู
  - ููุงุณ ุงููููู ููุนุฏู ุงูุฃุฎุทุงุก
  - ุฅุญุตุงุฆูุงุช ุงูููู (WebSocket vs Polling)
  - ุชูุงุฑูุฑ ุฏูุฑูุฉ ูู 5 ุฏูุงุฆู

- **ููุงููุณ ุงูุฃุฏุงุก**:
  - ุนุฏุฏ ุงูุฑุณุงุฆู ูู ุงูุซุงููุฉ
  - ูุชูุณุท ุงููููู
  - ูุนุฏู ุฅุนุงุฏุฉ ุงูุงุชุตุงูุงุช
  - ุญุงูุฉ ุตุญุฉ ุงููุธุงู

### 4. ูุธุงู ุชุญุณูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- **Debouncing**: `UserListOptimizer`
  - ุชุฌููุน ุงูุชุญุฏูุซุงุช ููุฏุฉ ุซุงููุฉ ูุงุญุฏุฉ
  - ุฅุฒุงูุฉ ุงูุชูุฑุงุฑุงุช
  - ูุนุงูุฌุฉ ูุฌูุนุฉ ููุฃุญุฏุงุซ

- **ุชุญุณูู ุงูุฃุฏุงุก**:
  - ุชูููู ุนุฏุฏ ุงูุชุญุฏูุซุงุช ุงููุฑุณูุฉ
  - ุชุฌูุจ spam ุงูุชุญุฏูุซุงุช
  - ูุนุงูุฌุฉ ุฐููุฉ ููุฃุญุฏุงุซ ุงููุชุชุงููุฉ

### 5. ุชุญุณูู ping/pong
- **ููุงุณ ุงููููู**: ูู ุงูุนููู
- **ุชูุจููุงุช ุงูุฃุฏุงุก**: ุนูุฏ ุงููููู ุงูุนุงูู (>1000ms)
- **ูุฑุงูุจุฉ ุงูุงุชุตุงู**: ุชุชุจุน ุญุงูุฉ ุงูุงุชุตุงู

## ๐ APIs ุฌุฏูุฏุฉ ูููุฑุงูุจุฉ

### `/api/socket-performance` (ูููุทูุฑูู ููุท)
```json
{
  "socketMetrics": {
    "connections": 45,
    "totalMessages": 1234,
    "messagesPerSecond": 12,
    "averageLatency": 150,
    "reconnections": 3,
    "errors": 0
  },
  "healthStatus": {
    "status": "healthy",
    "issues": []
  },
  "transportStats": {
    "websocket": 40,
    "polling": 5
  },
  "userListOptimizer": {
    "totalPendingRooms": 2,
    "totalPendingEvents": 8
  }
}
```

### `/api/socket-performance/flush-users` (POST)
- ุชูุธูู ูุฏูู ููุงุฆูุฉ ุงููุณุชุฎุฏููู
- ูููู ุชุญุฏูุฏ ุบุฑูุฉ ูุนููุฉ ุฃู ุชูุธูู ุฌููุน ุงูุบุฑู

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุชุญุณููุงุช ุงูุฃุฏุงุก:
- **ุชูููู ุงููููู ุจูุณุจุฉ 40-60%**
- **ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ ุจูุณุจุฉ 25-35%**
- **ุชุญุณูู ุงุณุชุฌุงุจุฉ ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุจูุณุจุฉ 70%**
- **ุชูููู ุนุฏุฏ ุงูุชุญุฏูุซุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ุจูุณุจุฉ 80%**

### ุชุญุณููุงุช ุงูุงุณุชูุฑุงุฑ:
- **ุชูููู ุงููุทุงุน ุงูุงุชุตุงูุงุช**
- **ุฅุนุงุฏุฉ ุงุชุตุงู ุฃุณุฑุน ูุฃูุซุฑ ุฐูุงุกู**
- **ูุดู ุฃูุถู ูููุดุงูู**
- **ุชุดุฎูุต ุฃุณูู ููุฃุฎุทุงุก**

### ุชุญุณููุงุช ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- **ุธููุฑ ุฃุณุฑุน ููุฃุณูุงุก ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู**
- **ุชุญุฏูุซุงุช ุฃูุซุฑ ุณูุงุณุฉ**
- **ุฃุฏุงุก ุฃูุถู ุนูู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ**
- **ุงุณุชุฌุงุจุฉ ุฃุณุฑุน ููุฃูุงูุฑ**

## ๐ง ููููุฉ ุงููุฑุงูุจุฉ

### ูู ุจูุฆุฉ ุงูุชุทููุฑ:
1. ุฒูุงุฑุฉ `/api/socket-performance` ููุดุงูุฏุฉ ุงูุฅุญุตุงุฆูุงุช
2. ูุฑุงูุจุฉ console ููุชูุจููุงุช
3. ุงุณุชุฎุฏุงู `/api/socket-performance/flush-users` ุนูุฏ ุงูุญุงุฌุฉ

### ูู ุงูุฅูุชุงุฌ:
- ุชูุงุฑูุฑ ุฏูุฑูุฉ ูู logs ูู 5 ุฏูุงุฆู
- ูุฑุงูุจุฉ ุชููุงุฆูุฉ ูุญุงูุฉ ุงูุตุญุฉ
- ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชูุงูู**: ุฌููุน ุงูุชุญุณููุงุช ูุชูุงููุฉ ูุน ุงูููุฏ ุงูููุฌูุฏ
2. **ุงูุชุฏุฑุฌ**: ุงูุชุญุณููุงุช ุชุนูู ุชุฏุฑูุฌูุงู ุญุณุจ ุงูุญุงุฌุฉ
3. **ุงููุฑุงูุจุฉ**: ูุฑุงูุจุฉ ูุณุชูุฑุฉ ูุถูุงู ุนุฏู ูุฌูุฏ ูุดุงูู ุฌุฏูุฏุฉ
4. **ุงูุฃูุงู**: ุฌููุน APIs ุงููุฑุงูุจุฉ ูุญููุฉ ููุชุงุญุฉ ูููุทูุฑูู ููุท

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ ุงูุชุญุณููุงุช** ูู ุจูุฆุฉ ุงูุชุทููุฑ
2. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก** ููุฏุฉ ุฃุณุจูุน
3. **ุชุทุจูู ูู ุงูุฅูุชุงุฌ** ุจุนุฏ ุงูุชุฃูุฏ ูู ุงูุงุณุชูุฑุงุฑ
4. **ูุฑุงูุจุฉ ูุณุชูุฑุฉ** ูุถุจุท ุงูุฅุนุฏุงุฏุงุช ุญุณุจ ุงูุญุงุฌุฉ

---

ุชู ุชุทุจูู ูุฐู ุงูุชุญุณููุงุช ูุญู ุงููุดุงูู ุงููุญุฏุฏุฉ:
- โ ุจุทุก ุงููููุน ุชุญุช ุงูุถุบุท
- โ ูุดุงูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู
- โ ูุดุงูู ุงูุงุชุตุงู ุนูู ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ
- โ ูุดุงูู ุฅุนุงุฏุฉ ุงูุงุชุตุงู