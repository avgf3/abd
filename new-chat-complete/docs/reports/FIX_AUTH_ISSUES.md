# ุฅุตูุงุญ ูุดุงูู ุงููุตุงุฏูุฉ ูุงูุฏุฎูู ๐ง

## ุงููุดููุฉ ุงูุฑุฆูุณูุฉ

ุงูุนููุฏ "role" ููููุฏ ูู ุฌุฏูู ุงููุณุชุฎุฏููู ููุง ูุณุจุจ ูุดู ูู:

- ุงูุชุณุฌูู
- ุชุณุฌูู ุงูุฏุฎูู ููุฃุนุถุงุก
- ุงูุฏุฎูู ูุถูู

## ุงูุญููู ุงููุชุงุญุฉ

### 1. ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ (SQLite)

```bash
npm run db:fix-sqlite
```

### 2. ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุงูุฅูุชุงุฌ (PostgreSQL)

```bash
npm run db:fix-production
```

### 3. ุฅุตูุงุญ ุนุงู (ูุนูู ูุน PostgreSQL ุฅุฐุง ูุงู DATABASE_URL ูุชููุฑ)

```bash
npm run db:fix
```

## ุงูุชุดุฎูุต ุงูุณุฑูุน

### ุฅุฐุง ุฑุฃูุช ูุฐุง ุงูุฎุทุฃ:

```
error: column "role" does not exist
โ CRITICAL: Missing "role" column in users table!
```

### ุงูุณุจุจ:

ุฌุฏูู ุงููุณุชุฎุฏููู ูุง ูุญุชูู ุนูู ุงูุนููุฏ ุงููุทููุจ "role"

### ุงูุญู:

1. ููุชุทููุฑ ุงููุญูู: `npm run db:fix-sqlite`
2. ููุฅูุชุงุฌ: `npm run db:fix-production`

## ูุง ููุนูู ุงูุฅุตูุงุญ:

1. **ุฅุถุงูุฉ ุงูุนููุฏ ุงูููููุฏ:**

   ```sql
   ALTER TABLE users ADD COLUMN role TEXT NOT NULL DEFAULT 'guest'
   ```

2. **ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ:**

   ```sql
   UPDATE users SET role = COALESCE(user_type, 'guest')
   ```

3. **ุฅุถุงูุฉ ุฃุนูุฏุฉ ุฃุฎุฑู ููููุฏุฉ:**
   - `profile_background_color`
   - `username_color`
   - `user_theme`
   - `bio`
   - `ignored_users`

## ุงูุชุญูู ูู ุงูุฅุตูุงุญ

ุจุนุฏ ุชุดุบูู ุงูุฅุตูุงุญุ ุณุชุญุตู ุนูู:

```
โ Role column added successfully
๐ Users table columns: [ูุงุฆูุฉ ุจุฌููุน ุงูุฃุนูุฏุฉ]
๐ฅ Total users in database: [ุนุฏุฏ ุงููุณุชุฎุฏููู]
๐ Sample users: [ุฃูุซูุฉ ุนูู ุงููุณุชุฎุฏููู]
```

## ุฎุทูุงุช ูุง ุจุนุฏ ุงูุฅุตูุงุญ

1. **ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู:**

   ```bash
   npm run dev    # ููุชุทููุฑ
   npm run start  # ููุฅูุชุงุฌ
   ```

2. **ุงุฎุชุจุฑ ุงููุตุงุฏูุฉ:**
   - ุฌุฑุจ ุงูุชุณุฌูู
   - ุฌุฑุจ ุชุณุฌูู ุงูุฏุฎูู
   - ุฌุฑุจ ุงูุฏุฎูู ูุถูู

## ุฅุฐุง ุงุณุชูุฑุช ุงููุดุงูู

1. **ุชุฃูุฏ ูู ูุฌูุฏ ุงููุนุชูุฏุงุช:**

   ```bash
   npm install
   ```

2. **ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ:**

   ```bash
   cat .env
   ```

3. **ูุญุต ุงูุณุฌูุงุช:**
   ```bash
   npm run dev
   # ุฃู ุฑุงุฌุน ุณุฌูุงุช Render
   ```

## ุงููููุงุช ุงููุชุฃุซุฑุฉ

- `server/storage.ts` - ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `server/routes/auth.ts` - ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
- `shared/schema.ts` - ูุฎุทุท PostgreSQL
- `shared/schema-sqlite.ts` - ูุฎุทุท SQLite
- `server/database-fallback.ts` - ูุธุงู SQLite ุงูุจุฏูู

## ูุตุงุฆุญ ูููุทูุฑูู

- ุงุณุชุฎุฏู `npm run db:fix-sqlite` ููุชุทููุฑ ุงููุญูู
- ุงุณุชุฎุฏู `npm run db:fix-production` ูู ุจูุฆุฉ Render
- ุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุจุนุฏ ุงูุฅุตูุงุญ
- ุฑุงุฌุน ุงูุณุฌูุงุช ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุฅุตูุงุญ

---

**ุชู ุงูุฅุตูุงุญ ุจูุงุณุทุฉ:** Claude AI Assistant  
**ุงูุชุงุฑูุฎ:** $(date)  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุชุทุจูู
