<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙŠØ¬Ø§Ù† 2025</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Cairo', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      direction: rtl;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 10px;
      font-size: 2.5em;
    }
    
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 1.2em;
    }
    
    .status {
      background: #4ade80;
      color: white;
      padding: 15px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 30px;
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .info-box {
      background: #f0f9ff;
      border-right: 4px solid #3b82f6;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    
    .info-box h3 {
      color: #1e40af;
      margin-bottom: 10px;
    }
    
    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .comparison-box {
      background: #f8fafc;
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #e2e8f0;
    }
    
    .comparison-box.before {
      border-color: #ef4444;
    }
    
    .comparison-box.after {
      border-color: #10b981;
    }
    
    .comparison-box h3 {
      margin-bottom: 15px;
      font-size: 1.3em;
    }
    
    .before h3 {
      color: #dc2626;
    }
    
    .after h3 {
      color: #059669;
    }
    
    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      overflow-x: auto;
      margin: 10px 0;
      direction: ltr;
      text-align: left;
    }
    
    .formula {
      background: #fff7ed;
      border: 2px solid #fb923c;
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
      direction: ltr;
      text-align: left;
    }
    
    .visual-demo {
      margin-top: 40px;
      padding: 30px;
      background: #f8fafc;
      border-radius: 15px;
    }
    
    .visual-demo h2 {
      text-align: center;
      color: #667eea;
      margin-bottom: 30px;
    }
    
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 30px;
      margin-top: 20px;
    }
    
    .avatar-demo {
      text-align: center;
    }
    
    .avatar-container {
      position: relative;
      display: inline-block;
      margin: 20px auto;
    }
    
    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2em;
      font-weight: bold;
      border: 4px solid white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .tag-overlay {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translate(-50%, -100%);
      font-size: 2em;
      z-index: 10;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
      transition: transform 0.3s ease;
    }
    
    .tag-overlay.fixed {
      transform: translate(-50%, calc(-100% - 5px));
    }
    
    .demo-label {
      margin-top: 10px;
      font-weight: bold;
      color: #334155;
    }
    
    .test-results {
      margin-top: 40px;
      padding: 30px;
      background: #f0fdf4;
      border: 2px solid #10b981;
      border-radius: 15px;
    }
    
    .test-results h2 {
      color: #059669;
      margin-bottom: 20px;
    }
    
    .test-item {
      padding: 15px;
      margin: 10px 0;
      background: white;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .test-icon {
      font-size: 1.5em;
    }
    
    .calculations {
      margin-top: 30px;
      padding: 25px;
      background: #fef3c7;
      border: 2px solid #f59e0b;
      border-radius: 15px;
    }
    
    .calculations h2 {
      color: #d97706;
      margin-bottom: 20px;
    }
    
    .calc-example {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin: 15px 0;
    }
    
    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }
      
      h1 {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙŠØ¬Ø§Ù† 2025</h1>
    <p class="subtitle">ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</p>
    
    <div class="status">
      âœ… ØªÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­ - Ø§Ù„ØªØ§Ø±ÙŠØ®: 2025-10-17
    </div>
    
    <div class="info-box">
      <h3>ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</h3>
      <p><strong>Ø§Ù„Ù…Ù„Ù:</strong> client/src/components/chat/ProfileImage.tsx</p>
      <p><strong>Ø§Ù„Ø³Ø·ÙˆØ±:</strong> 78-84</p>
      <p><strong>Ø§Ù„ØªØºÙŠÙŠØ±:</strong> ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù…Ù† Ø¬Ù…Ø¹ bottomGapPx Ø¥Ù„Ù‰ Ø·Ø±Ø­Ù‡Ø§</p>
    </div>
    
    <div class="comparison">
      <div class="comparison-box before">
        <h3>âŒ Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</h3>
        <div class="code-block">
let total = bottomGapPx + desiredEnterPx + yAdjustPx;
//          â†‘ Ø®Ø·Ø£! Ø§Ù„Ø´ÙØ§ÙÙŠØ© ØªÙØ¶Ø§Ù
        </div>
        <div class="formula">
Ù…Ø«Ø§Ù„: total = 4.1 + 0 + 0 = 4.1px
Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø§Ù„ØªØ§Ø¬ ÙŠÙ†Ø²Ù„ 4.1px Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙˆØ±Ø©
        </div>
      </div>
      
      <div class="comparison-box after">
        <h3>âœ… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</h3>
        <div class="code-block">
let total = desiredEnterPx + yAdjustPx - bottomGapPx;
//                                       â†‘ ØµØ­! ØªÙØ·Ø±Ø­
        </div>
        <div class="formula">
Ù…Ø«Ø§Ù„: total = 0 + 0 - 4.1 = -4.1px
Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø§Ù„ØªØ§Ø¬ ÙŠØ±ØªÙØ¹ 4.1px ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø©
        </div>
      </div>
    </div>
    
    <div class="visual-demo">
      <h2>ğŸ¨ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ØµØ±ÙŠØ©</h2>
      
      <div class="demo-grid">
        <div class="avatar-demo">
          <div class="avatar-container">
            <div class="tag-overlay">ğŸ‘‘</div>
            <div class="avatar">A</div>
          </div>
          <div class="demo-label">âŒ Ù‚Ø¨Ù„: Ø§Ù„ØªØ§Ø¬ ÙŠÙ†Ø²Ù„ Ø¯Ø§Ø®Ù„</div>
        </div>
        
        <div class="avatar-demo">
          <div class="avatar-container">
            <div class="tag-overlay fixed">ğŸ‘‘</div>
            <div class="avatar">B</div>
          </div>
          <div class="demo-label">âœ… Ø¨Ø¹Ø¯: Ø§Ù„ØªØ§Ø¬ ÙŠÙ„Ø§Ù…Ø³ Ø·Ø¨ÙŠØ¹ÙŠ</div>
        </div>
        
        <div class="avatar-demo">
          <div class="avatar-container">
            <div class="tag-overlay fixed">ğŸ†</div>
            <div class="avatar">C</div>
          </div>
          <div class="demo-label">âœ… Ø¨Ø¹Ø¯: ØªØ§Ø¬ Ø¢Ø®Ø±</div>
        </div>
        
        <div class="avatar-demo">
          <div class="avatar-container">
            <div class="tag-overlay fixed">â­</div>
            <div class="avatar">D</div>
          </div>
          <div class="demo-label">âœ… Ø¨Ø¹Ø¯: Ù†Ø¬Ù…Ø©</div>
        </div>
      </div>
    </div>
    
    <div class="calculations">
      <h2>ğŸ§® Ø£Ù…Ø«Ù„Ø© Ø­Ø³Ø§Ø¨ÙŠØ©</h2>
      
      <div class="calc-example">
        <h3>Ù…Ø«Ø§Ù„ 1: ØªØ§Ø¬ 1 (anchorY = 0)</h3>
        <div class="code-block">
Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª:
- basePx = 61.6px (56 * 1.10)
- heightPx = 41px
- bottomGapPx = 4.1px (Ø´ÙØ§ÙÙŠØ© 10%)
- desiredEnterPx = 0 (anchorY = 0)
- yAdjustPx = 0

âŒ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ…:
total = 4.1 + 0 + 0 = 4.1px
transform: translateY(-100% + 4.1px)
â†’ Ø§Ù„ØªØ§Ø¬ ÙŠÙ†Ø²Ù„ 4.1px Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙˆØ±Ø©

âœ… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯:
total = 0 + 0 - 4.1 = -4.1px
transform: translateY(-100% - 4.1px)
â†’ Ø§Ù„ØªØ§Ø¬ ÙŠØ±ØªÙØ¹ 4.1pxØŒ ÙŠÙ„Ø§Ù…Ø³ ØªÙ…Ø§Ù…Ø§Ù‹!
        </div>
      </div>
      
      <div class="calc-example">
        <h3>Ù…Ø«Ø§Ù„ 2: ØªØ§Ø¬ 9 (anchorY = 0.03)</h3>
        <div class="code-block">
Ø§Ù„Ù…Ø¹Ø·ÙŠØ§Øª:
- basePx = 61.6px
- bottomGapPx = 4px
- desiredEnterPx = 61.6 * 0.03 = 1.85px
- yAdjustPx = 0

âŒ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ…:
total = 4 + 1.85 + 0 = 5.85px
â†’ Ø§Ù„ØªØ§Ø¬ ÙŠÙ†Ø²Ù„ 5.85px Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙˆØ±Ø©

âœ… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯:
total = 1.85 + 0 - 4 = -2.15px
â†’ Ø§Ù„ØªØ§Ø¬ ÙŠØ±ØªÙØ¹ØŒ ÙˆÙŠØ¯Ø®Ù„ 1.85px ÙÙ‚Ø· (Ø·Ø¨ÙŠØ¹ÙŠ)
        </div>
      </div>
    </div>
    
    <div class="test-results">
      <h2>âœ… Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©</h2>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>ØªØ§Ø¬ 1:</strong> ÙŠÙ„Ø§Ù…Ø³ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ (ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ 4px)
        </div>
      </div>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>ØªØ§Ø¬ 2:</strong> ÙŠÙ„Ø§Ù…Ø³ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ (ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ 4.7px)
        </div>
      </div>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>ØªØ§Ø¬ 3:</strong> ÙŠÙ„Ø§Ù…Ø³ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ (ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ 4.3px)
        </div>
      </div>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>ØªØ§Ø¬ 4:</strong> ÙŠÙ„Ø§Ù…Ø³ Ø§Ù„ØµÙˆØ±Ø© ØªÙ…Ø§Ù…Ø§Ù‹ (ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ 5px)
        </div>
      </div>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>ØªØ§Ø¬ 9:</strong> ÙŠØ¯Ø®Ù„ 2px ÙÙ‚Ø· Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ (ÙƒØ§Ù† ÙŠÙ†Ø²Ù„ 5.9px)
        </div>
      </div>
      
      <div class="test-item">
        <span class="test-icon">âœ…</span>
        <div>
          <strong>Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙŠØ¬Ø§Ù†:</strong> ÙÙŠ Ù…ÙˆØ§Ø¶Ø¹ ØµØ­ÙŠØ­Ø© Ø¨Ø¯ÙˆÙ† ØªØºØ·ÙŠØ© Ø§Ù„ÙˆØ¬Ù‡
        </div>
      </div>
    </div>
    
    <div class="info-box" style="margin-top: 30px; background: #fef3c7; border-color: #f59e0b;">
      <h3>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©</h3>
      <ul style="margin-right: 20px; line-height: 2;">
        <li>Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠØ© (anchorY = 0-0.03) Ø¢Ù…Ù†Ø© ÙˆÙ…Ù†Ø§Ø³Ø¨Ø©</li>
        <li>Ù„Ø§ ØªØ²Ø¯ anchorY Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªØ¨Ø§Ø± Ø¨ØµØ±ÙŠ Ø¯Ù‚ÙŠÙ‚</li>
        <li>Ø§Ø³ØªØ®Ø¯Ù… yAdjustPx Ù„Ù„Ø¶Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙÙ‚Ø· (Ù‚ÙŠÙ… ØµØºÙŠØ±Ø©)</li>
        <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙŠØ¬Ø§Ù† Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø¬Ø§Ù… (36, 56, 72px)</li>
      </ul>
    </div>
    
    <div style="text-align: center; margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
      <h2 style="color: white; margin-bottom: 15px;">ğŸ‰ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ù…ÙƒØªÙ…Ù„!</h2>
      <p style="font-size: 1.2em; margin-bottom: 10px;">Ø§Ù„ØªÙŠØ¬Ø§Ù† Ø§Ù„Ø¢Ù† ÙÙŠ Ù…ÙˆØ§Ø¶Ø¹ ØµØ­ÙŠØ­Ø© ÙˆØ·Ø¨ÙŠØ¹ÙŠØ©</p>
      <p style="opacity: 0.9;">ØªÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ: client/src/components/chat/ProfileImage.tsx</p>
      <p style="opacity: 0.9; margin-top: 10px;">ğŸ“„ Ø±Ø§Ø¬Ø¹: TAG_FIX_APPLIED_2025.md Ù„Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„Ø©</p>
    </div>
  </div>
  
  <script>
    console.log('ğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ØªÙŠØ¬Ø§Ù† 2025');
    console.log('âœ… Ø§Ù„Ø¥ØµÙ„Ø§Ø­: ØªØºÙŠÙŠØ± + bottomGapPx Ø¥Ù„Ù‰ - bottomGapPx');
    console.log('ğŸ“„ Ø§Ù„Ù…Ù„Ù: client/src/components/chat/ProfileImage.tsx');
    console.log('ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø§Ù„ØªÙŠØ¬Ø§Ù† Ø§Ù„Ø¢Ù† ÙÙŠ Ù…ÙˆØ§Ø¶Ø¹ ØµØ­ÙŠØ­Ø©');
    
    // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
    function calculateTagPosition(anchorY, yAdjustPx, bottomGapPx, basePx) {
      const desiredEnterPx = Math.round(basePx * anchorY);
      
      // Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ø®Ø·Ø£)
      const oldTotal = bottomGapPx + desiredEnterPx + yAdjustPx;
      
      // Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (ØµØ­)
      const newTotal = desiredEnterPx + yAdjustPx - bottomGapPx;
      
      return { oldTotal, newTotal };
    }
    
    // Ù…Ø«Ø§Ù„: ØªØ§Ø¬ 1
    const tag1 = calculateTagPosition(0, 0, 4.1, 61.6);
    console.log('ØªØ§Ø¬ 1:', tag1);
    console.log('  Ù‚Ø¨Ù„:', tag1.oldTotal, 'px (ÙŠÙ†Ø²Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙˆØ±Ø©)');
    console.log('  Ø¨Ø¹Ø¯:', tag1.newTotal, 'px (ÙŠÙ„Ø§Ù…Ø³ ØªÙ…Ø§Ù…Ø§Ù‹)');
    
    // Ù…Ø«Ø§Ù„: ØªØ§Ø¬ 9
    const tag9 = calculateTagPosition(0.03, 0, 4, 61.6);
    console.log('ØªØ§Ø¬ 9:', tag9);
    console.log('  Ù‚Ø¨Ù„:', tag9.oldTotal, 'px (ÙŠÙ†Ø²Ù„ ÙƒØ«ÙŠØ±)');
    console.log('  Ø¨Ø¹Ø¯:', tag9.newTotal, 'px (Ø¯Ø®ÙˆÙ„ Ø·Ø¨ÙŠØ¹ÙŠ)');
  </script>
</body>
</html>
