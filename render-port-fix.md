# إصلاح مشكلة المنفذ في Render

## المشكلة
كان المشروع يحدد المنفذ بشكل صريح في مكانين:
1. في ملف `.env`: `PORT=5000`
2. في ملف `render.yaml`: `PORT: 10000`

## السبب
Render يعيّن متغير البيئة `PORT` تلقائياً ولا يجب تحديده يدوياً.

## الحل

### 1. في ملف `.env`
تم تعليق السطر:
```bash
# PORT يتم تعيينه تلقائياً بواسطة Render
# PORT=5000
```

### 2. في ملف `render.yaml`
تم إزالة:
```yaml
- key: PORT
  value: 10000
```

## كيف يعمل Render

1. **Render يعيّن المنفذ تلقائياً**: عند نشر التطبيق، Render يختار منفذ متاح ويعيّنه في `process.env.PORT`

2. **الكود يتعامل مع هذا تلقائياً**: في `server/index.ts`:
```typescript
const preferredPort = process.env.PORT ? Number(process.env.PORT) : 5000;
```

3. **في البيئة المحلية**: سيستخدم المنفذ 5000 كقيمة افتراضية
4. **في Render**: سيستخدم المنفذ الذي يعيّنه Render

## نصائح مهمة

- **لا تحدد PORT في render.yaml أبداً**
- **لا تحدد PORT في .env للإنتاج**
- **دع Render يدير المنافذ تلقائياً**

## للتطوير المحلي

إذا أردت استخدام منفذ مختلف محلياً:
```bash
PORT=3000 npm run dev
```

أو أضف في `.env.local` (ليس `.env`):
```bash
PORT=3000
```