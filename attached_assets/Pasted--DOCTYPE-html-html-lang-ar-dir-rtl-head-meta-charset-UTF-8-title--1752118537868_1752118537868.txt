<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø±Ø¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; }
    .user-rank { padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 12px; display: inline-block; margin-left: 4px; }
    .crown { background-color: gold; color: #000; }
    .star { background-color: silver; color: #000; }
    .shield { background-color: #3366ff; color: #fff; }
    .animate-fade-in { animation: fade-in 0.3s ease-out; }
    @keyframes fade-in { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .user-popup {
      position: absolute; background-color: #012d36; color: white;
      border: 1px solid #01596d; border-radius: 6px; padding: 6px 8px;
      font-size: 14px; z-index: 9999; display: none; flex-direction: column;
      gap: 4px; min-width: 140px;
    }
    .user-popup button { text-align: right; padding: 4px; border-radius: 4px; }
    .user-popup button:hover { background-color: #01404f; }
    .private-message-box {
      position: fixed; bottom: 80px; right: 20px; width: 300px;
      background-color: #012d36; border: 1px solid #01596d; border-radius: 8px;
      color: white; padding: 10px; z-index: 10000;
    }
    .clickable-username { color: #1dcaff; cursor: pointer; font-weight: bold; }
    .user-img {
      width: 32px;
      height: 32px;
      border-radius: 9999px;
      object-fit: cover;
      margin-left: 8px;
      border: 2px solid #38bdf8;
      background: #000;
    }
  </style>
</head>
<body class="bg-[#011826] text-white">

<!-- âœ… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="welcomeScreen" class="h-screen flex flex-col justify-center items-center">
  <h1 class="text-4xl font-extrabold mb-6 animate-pulse">ğŸ¤ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø±Ø¨</h1>
  <div class="flex gap-4">
    <button id="enterAsGuest" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded shadow-lg transition-all duration-300">Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±</button>
    <button id="enterAsMember" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded shadow-lg transition-all duration-300">Ø¯Ø®ÙˆÙ„ ÙƒØ¹Ø¶Ùˆ</button>
    <button id="loginWithGoogle" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded shadow-lg transition-all duration-300">Ø¯Ø®ÙˆÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© Google</button>
  </div>
</div>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø§Ø¦Ø± -->
<div id="guestNameModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded shadow-lg w-80 text-center text-black">
    <h2 class="mb-4 text-lg font-bold text-gray-800">ğŸ“ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø§Ø¦Ø±</h2>
    <input id="guestNameInput" type="text" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø²Ø§Ø¦Ø±2025" class="w-full mb-4 px-3 py-2 border rounded focus:outline-none focus:ring">
    <button onclick="confirmGuestName()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Ø¯Ø®ÙˆÙ„</button>
  </div>
</div>

<!-- âœ… Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ø¶Ùˆ -->
<div id="memberLoginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded shadow-lg w-80 text-center text-black">
    <h2 class="mb-4 text-lg font-bold text-gray-800">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙƒØ¹Ø¶Ùˆ</h2>
    <input id="memberNameInput" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="w-full mb-3 px-3 py-2 border rounded">
    <input id="memberPasswordInput" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full mb-4 px-3 py-2 border rounded">
    <button onclick="confirmMemberLogin()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Ø¯Ø®ÙˆÙ„</button>
  </div>
</div>

<!-- âœ… Ø§Ù„Ø´Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„ -->
<div id="chatApp" style="display: none; height: 100vh; flex-direction: column;">
  <header class="bg-[#001B24] py-3 px-4 flex justify-between items-center shadow-lg">
    <div class="text-xl font-bold text-white flex items-center gap-2">
      <span>Arabic<span class="text-pink-500">chat</span></span>
    </div>
    <div class="flex gap-4">
      <button id="settingsBtn" class="bg-[#01404f] px-3 py-2 rounded hover:bg-[#01596d] transition">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    </div>
  </header>
  <main class="flex flex-1 overflow-hidden">
    <aside class="w-64 bg-[#002B36] p-4 text-sm space-y-2 overflow-y-auto border-l border-[#014f5f]">
      <input type="text" placeholder="Ø¨Ø­Ø«..." class="w-full p-2 rounded bg-[#01404f] border border-[#01596d] placeholder-gray-300 text-white">
      <div class="font-bold text-green-400">ğŸŸ¢ Ø§Ù„Ù…ØªØµÙ„ÙˆÙ†</div>
      <ul class="space-y-1" id="userList"></ul>
    </aside>
    <section class="flex-1 flex flex-col bg-white">
      <div id="chat" class="flex-1 p-4 overflow-y-auto space-y-2 text-sm"></div>
      <div class="shrink-0 flex items-center gap-2 p-3 border-t border-[#014f5f] bg-[#f9f9f9]">
        <label for="imageInput" class="bg-blue-600 text-white px-3 py-2 rounded cursor-pointer hover:bg-blue-700 text-xl">â•</label>
        <input type="file" id="imageInput" accept="image/*" class="hidden" onchange="sendImage(event)">
        <input id="messageInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." class="flex-1 px-4 py-2 rounded bg-white border border-[#01596d] text-black placeholder-gray-600">
        <button onclick="sendMessage();" class="bg-green-600 px-4 py-2 rounded text-white font-bold hover:bg-green-700">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </section>
  </main>
</div>

<!-- âœ… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
<div id="userPopup" class="user-popup"></div>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© -->
<div id="privateMessageBox" class="private-message-box hidden">
  <div class="flex justify-between items-center mb-2">
    <span id="privateMsgHeader" class="font-bold">Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰</span>
    <button onclick="closePrivateMessageBox()">âŒ</button>
  </div>
  <div id="privateMsgContent" class="text-sm mb-2"></div>
  <input id="privateMsgInput" type="text" class="w-full p-2 rounded bg-[#01404f] border border-[#01596d] text-white placeholder-gray-300" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
  <button onclick="sendPrivateMsg()" class="w-full mt-2 bg-green-600 hover:bg-green-700 px-3 py-1 rounded">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<!-- âœ… ØµÙˆØª ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø§ØµØ© -->
<audio id="privateMsgSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>

<!-- âœ… Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© -->
<div id="profileModal" style="display:none;">
  <div id="profileHeader">
    <img id="profileImage" src="https://i.imgur.com/1Q9Z1Z1.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" onclick="uploadImage()">
    <div>
      <input id="profileName" class="text-xl font-bold bg-transparent border-none text-white focus:outline-none" placeholder="ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… âœï¸" />
      <div class="flex gap-2 text-sm mt-1">
        <input id="userStatus" class="bg-transparent border-none text-gray-300 focus:outline-none" placeholder="Ø§ÙƒØªØ¨ Ø­Ø§Ù„ØªÙƒ...">
      </div>
    </div>
  </div>
  <div id="profileTabs">
    <button onclick="switchTab('info')" class="active">Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</button>
    <button onclick="switchTab('friends')">Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</button>
    <button onclick="switchTab('ignore')">ØªØ¬Ø§Ù‡Ù„</button>
    <button onclick="switchTab('options')">Ø®ÙŠØ§Ø±Ø§Øª</button>
  </div>
  <div id="profileContent">
    <div id="info" class="tab-section active">
      <div class="profile-grid">
        <div>
          <label>Ø§Ù„Ø¬Ù†Ø³</label>
          <select id="gender"><option>Ø°ÙƒØ±</option><option>Ø£Ù†Ø«Ù‰</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø¹Ù…Ø±</label>
          <select id="age">
            <option>Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø±</option>
            <!-- Ø§Ù„Ø¹Ù…Ø± Ù…Ù† 18-99 -->
            <script>for(let i=18;i<=99;i++)document.write(`<option>${i}</option>`);</script>
          </select>
        </div>
        <div>
          <label>Ø§Ù„Ø¨Ù„Ø¯</label>
          <select id="country">
            <option>Ø§Ù„Ø£Ø±Ø¯Ù†</option><option>Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option><option>Ù…ØµØ±</option><option>Ø§Ù„Ù…ØºØ±Ø¨</option>
            <option>Ø§Ù„Ø¹Ø±Ø§Ù‚</option><option>Ø³ÙˆØ±ÙŠØ§</option><option>Ù„Ø¨Ù†Ø§Ù†</option><option>ØªÙˆÙ†Ø³</option>
            <option>Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option><option>Ù„ÙŠØ¨ÙŠØ§</option><option>Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option><option>Ù‚Ø·Ø±</option>
            <option>Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option><option>Ø¹Ù…Ø§Ù†</option><option>ÙÙ„Ø³Ø·ÙŠÙ†</option><option>Ø§Ù„ÙŠÙ…Ù†</option>
            <option>Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option><option>Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§</option><option>Ø§Ù„ØµÙˆÙ…Ø§Ù„</option>
          </select>
        </div>
        <div>
          <label>Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©</label>
          <select id="relation"><option>Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø±</option><option>Ø£Ø¹Ø²Ø¨</option><option>Ù…Ø±ØªØ¨Ø·</option></select>
        </div>
      </div>
    </div>
    <div id="friends" class="tab-section">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ù‡Ù†Ø§...</div>
    <div id="ignore" class="tab-section">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¬Ø§Ù‡Ù„ Ù‡Ù†Ø§...</div>
    <div id="options" class="tab-section">
      <div class="profile-grid">
        <div>
          <label>Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø²Ù…Ù†ÙŠ</label>
          <select><option>Asia/Riyadh</option><option>Asia/Amman</option></select>
        </div>
        <div>
          <label>Ù„ØºØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</label>
          <select><option>Arabic</option><option>English</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø°ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ± Ø®Ø§ØµØ©</label>
          <select><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option><option>Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙÙ‚Ø·</option></select>
        </div>
        <div>
          <label>Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ©</label>
          <select><option>Ù…ÙØªÙˆØ­Ø©</option><option>Ù…ØºÙ„Ù‚Ø©</option></select>
        </div>
        <div>
          <label>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ø·Ù„Ø¨ Ø§Ù„ØªØ­Ø¯Ø«</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ù…Ù† ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ù†Ù‚Ø§Ø·ÙŠ</label>
          <select><option>Ø£Ù†Ø§ ÙÙ‚Ø·</option><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option></select>
        </div>
        <div>
          <label>Ù…Ù† ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ø£ØµØ¯Ù‚Ø§Ø¦ÙŠ</label>
          <select><option>Ø£Ù†Ø§ ÙÙ‚Ø·</option><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option></select>
        </div>
        <div>
          <label>Ø¸Ù‡ÙˆØ± Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø£ØµÙˆØ§Øª</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>ØµØ§Ù…Øª</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø«ÙŠÙ…</label>
          <select><option>Lite</option><option>Dark</option></select>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center mt-6">
    <button onclick="saveProfile()" class="bg-green-600 px-4 py-2 rounded font-bold">âœ”ï¸ Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<!-- Ù‚Ø§Ø¦Ù…Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù†Ø¨Ø«Ù‚Ø© -->
<div id="settingsMenu" class="hidden fixed top-16 right-4 bg-[#012d36] rounded border border-[#01596d] z-50 shadow-lg animate-fade-in">
  <button onclick="document.getElementById('profileModal').style.display='block'" class="w-full px-4 py-2 border-b border-[#01596d] text-right hover:bg-[#01404f]">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</button>
  <button class="w-full px-4 py-2 border-b border-[#01596d] text-right hover:bg-[#01404f]">ğŸ“ Ø§Ù„ØºØ±Ù</button>
  <button onclick="alert('ğŸšª ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬')" class="w-full px-4 py-2 text-right hover:bg-[#01404f]">ğŸšª Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<script>
/* Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… */
let currentUserName = null;
const connectedUsers = [];
const ownerName = "ğ”¸ğ”¹ğ”»ğ”¸ğ•ƒğ•‚ğ”¸â„ğ”¼ğ•„";
const ownerPassword = "Ø¹Ø¨Ø¯Ø§Ù„ÙƒØ±ÙŠÙ…22333";
const badWords = ["Ù‚Ø°Ø±", "Ø­Ù‚ÙŠØ±", "ØªØ§ÙÙ‡", "Ø®Ø±Ø§", "ÙƒÙ„Ø¨", "Ø§Ø¨Ù† ÙƒÙ„Ø¨", "ØªÙŠØ³", "Ø²ÙØª"];
const mutedUsers = {};
const userLastMessages = {};
let currentPrivateReceiver = null;
const privateConversations = {};

/* Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
document.getElementById("enterAsGuest").addEventListener("click", () => {
  document.getElementById("guestNameModal").classList.remove("hidden");
});
document.getElementById("enterAsMember").addEventListener("click", () => {
  document.getElementById("memberLoginModal").classList.remove("hidden");
});
document.getElementById("guestNameInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") { e.preventDefault(); confirmGuestName(); }
});
document.getElementById("memberPasswordInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") { e.preventDefault(); confirmMemberLogin(); }
});

/* Ù†Ø¸Ø§Ù… ÙƒÙ„Ù…Ø§Øª Ø³ÙŠØ¦Ø© ÙˆØªÙƒØ±Ø§Ø± */
function hasRepeatedWords(message) {
  const words = message.split(" ");
  const wordCounts = {};
  for (let word of words) {
    wordCounts[word] = (wordCounts[word] || 0) + 1;
    if (wordCounts[word] > 2) return true;
  }
  return false;
}
function containsBadWord(message) {
  return badWords.some(word => message.includes(word));
}
function muteUserTemporarily(name) {
  mutedUsers[name] = true;
  setTimeout(() => { delete mutedUsers[name]; }, 60000);
}

/* Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø± */
function confirmGuestName() {
  const name = document.getElementById("guestNameInput").value.trim();
  if (!name) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø²Ø§Ø¦Ø±");
  if (connectedUsers.includes(name)) return alert("âš ï¸ Ø§Ù„Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„");
  currentUserName = name;
  connectedUsers.push(name);
  addUserToList(name);
  enterChat();
  document.getElementById("guestNameModal").classList.add("hidden");
}
/* Ø¯Ø®ÙˆÙ„ ÙƒØ¹Ø¶Ùˆ */
function confirmMemberLogin() {
  const name = document.getElementById("memberNameInput").value.trim();
  const password = document.getElementById("memberPasswordInput").value.trim();
  if (!name || !password) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");
  if (connectedUsers.includes(name)) return alert("âš ï¸ Ø§Ù„Ø§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„");
  if (name === ownerName && password === ownerPassword) {
    currentUserName = name;
    connectedUsers.push(name);
    addUserToListWithRole(name, "owner");
    enterChat();
    document.getElementById("memberLoginModal").classList.add("hidden");
  } else {
    alert("âŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ ÙÙ‚Ø· Ø§Ù„Ø£ÙˆÙ†Ø± ÙŠÙ…Ù„Ùƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¹Ø¶Ùˆ.");
  }
}
/* Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø´Ø§Øª */
function enterChat() {
  document.getElementById("welcomeScreen").style.display = "none";
  document.getElementById("chatApp").style.display = "flex";
  sendWelcomeMessage(currentUserName);
}

/* Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØµÙ„ÙŠÙ† */
function getProfileImageFor(name) {
  let profileData = JSON.parse(localStorage.getItem("userProfile") || '{}');
  if (profileData && profileData.name === name && profileData.img) {
    return profileData.img;
  }
  return "https://i.imgur.com/1Q9Z1Z1.png";
}
function addUserToList(name) {
  const list = document.getElementById("userList");
  const li = document.createElement("li");
  li.className =
    "relative flex items-center justify-between bg-[#01404f] px-2 py-1 rounded hover:bg-[#01596d] transition cursor-pointer";
  const img = document.createElement("img");
  img.src = getProfileImageFor(name);
  img.alt = "ØµÙˆØ±Ø©";
  img.className = "user-img";
  const span = document.createElement("span");
  span.textContent = name;
  span.className = "font-bold clickable-username";
  span.onclick = (e) => showUserPopup(e, name);
  const icon = document.createElement("span");
  icon.textContent = "ğŸ¯";
  const flex = document.createElement("div");
  flex.className = "flex items-center gap-2";
  flex.appendChild(img);
  flex.appendChild(span);
  li.appendChild(flex);
  li.appendChild(icon);
  list.prepend(li);
}
function addUserToListWithRole(name, role) {
  const list = document.getElementById("userList");
  const li = document.createElement("li");
  li.className =
    "relative flex items-center justify-between bg-[#01404f] px-2 py-1 rounded hover:bg-[#01596d] transition cursor-pointer";
  const img = document.createElement("img");
  img.src = getProfileImageFor(name);
  img.alt = "ØµÙˆØ±Ø©";
  img.className = "user-img";
  const span = document.createElement("span");
  span.innerHTML = `<span style="color:black; font-weight:bold;" onclick="showUserPopup(event, '${name}')">ã€ ${name} ã€</span>`;
  const rank = document.createElement("span");
  rank.className = "user-rank crown";
  rank.textContent = "ğŸ‘‘ Ø§ÙˆÙ†Ø±";
  const flex = document.createElement("div");
  flex.className = "flex items-center gap-2";
  flex.appendChild(img);
  flex.appendChild(span);
  li.appendChild(flex);
  li.appendChild(rank);
  list.prepend(li);
}

/* Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù… */
function showUserPopup(event, username) {
  event.stopPropagation();
  const popup = document.getElementById("userPopup");
  popup.innerHTML = `
    <button onclick="viewProfile('${username}')">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</button>
    <button onclick="sendPrivateMessage('${username}')">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©</button>
  `;
  popup.style.display = "flex";
  popup.style.top = `${event.clientY}px`;
  popup.style.left = `${event.clientX - 150}px`;
}
document.addEventListener("click", function () {
  const popup = document.getElementById("userPopup");
  popup.style.display = "none";
});
function viewProfile(name) {
  alert(`Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${name}`);
}
function sendPrivateMessage(name) {
  currentPrivateReceiver = name;
  document.getElementById("privateMsgHeader").textContent = `Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ${name}`;
  document.getElementById("privateMsgInput").value = "";
  const contentBox = document.getElementById("privateMsgContent");
  contentBox.innerHTML = (privateConversations[name] || []).join('');
  document.getElementById("privateMessageBox").classList.remove("hidden");
}
function closePrivateMessageBox() {
  document.getElementById("privateMessageBox").classList.add("hidden");
}
function sendPrivateMsg() {
  const msg = document.getElementById("privateMsgInput").value.trim();
  if (!msg || !currentPrivateReceiver) return;
  const chat = document.getElementById("privateMsgContent");
  const messageHTML = `<div class='mb-1 text-right'><strong>${currentUserName}:</strong> ${msg}</div>`;
  chat.innerHTML += messageHTML;
  document.getElementById("privateMsgInput").value = "";
  if (!privateConversations[currentPrivateReceiver]) {
    privateConversations[currentPrivateReceiver] = [];
  }
  privateConversations[currentPrivateReceiver].push(messageHTML);
  document.getElementById("privateMsgSound").play();
}

/* Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¹Ø§Ù…Ø© */
document.getElementById("messageInput").addEventListener("keypress", function(e) {
  if (e.key === "Enter") { e.preventDefault(); sendMessage(); }
});
function sendMessage() {
  const input = document.getElementById('messageInput');
  const message = input.value.trim();
  if (!message) return;
  if (mutedUsers[currentUserName]) return alert("ğŸš« Ù„Ù‚Ø¯ ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ø¤Ù‚ØªØ§Ù‹ Ù…Ù† Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©.");
  if (hasRepeatedWords(message)) return alert("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±ØªÙŠÙ†.");
  if (containsBadWord(message)) {
    muteUserTemporarily(currentUserName);
    return alert("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø³Ø¨Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø§Øª ØºÙŠØ± Ù„Ø§Ø¦Ù‚Ø©.");
  }
  if (!userLastMessages[currentUserName]) {
    userLastMessages[currentUserName] = [];
  }
  const lastMsgs = userLastMessages[currentUserName];
  if (
    lastMsgs.length >= 2 &&
    lastMsgs[lastMsgs.length - 1] === message &&
    lastMsgs[lastMsgs.length - 2] === message
  ) {
    return alert("âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±ØªÙŠÙ†.");
  }
  lastMsgs.push(message);
  if (lastMsgs.length > 3) lastMsgs.shift();
  const chat = document.getElementById('chat');
  const msg = document.createElement('div');
  msg.className = "bg-[#f0f0f0] text-black px-3 py-2 rounded flex items-center gap-2";
  let displayName = currentUserName || "Ø£Ù†Øª";
  let profileImage = getProfileImageFor(displayName);
  let usernameSpan = `<span class='clickable-username' onclick=\"showUserPopup(event, '${displayName}')\">${displayName}</span>`;
  if (displayName === ownerName) {
    msg.innerHTML = `<img src='${profileImage}' class='user-img'><span>ğŸ‘‘ <strong>${usernameSpan}:</strong> ${message}</span>`;
  } else {
    msg.innerHTML = `<img src='${profileImage}' class='user-img'><span>ğŸ¯ <strong>${usernameSpan}:</strong> ${message}</span>`;
  }
  chat.appendChild(msg);
  input.value = '';
  chat.scrollTop = chat.scrollHeight;
}

/* Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ø¨Ø§Ù„Ø´Ø§Øª */
function sendImage(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(e) {
    const chat = document.getElementById('chat');
    const msg = document.createElement('div');
    msg.className = "bg-[#f0f0f0] text-black px-3 py-2 rounded flex items-center gap-2";
    let profileImage = getProfileImageFor(currentUserName);
    msg.innerHTML = `<img src='${profileImage}' class='user-img'><span>ğŸ–¼ï¸ <strong>${currentUserName}:</strong><br><img src='${e.target.result}' class='mt-2 rounded max-w-xs'></span>`;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
  }
  reader.readAsDataURL(file);
}

/* Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ */
function sendWelcomeMessage(name) {
  const chat = document.getElementById('chat');
  const msg = document.createElement('div');
  msg.className = "text-red-600 text-xs px-3 py-1";
  msg.innerHTML = `ğŸ’¬ <strong>Ø§Ù„Ù†Ø¸Ø§Ù…:</strong> Ù…Ø±Ø­Ø¨Ù‹Ø§ <span class="font-bold">${name}</span> ÙÙŠ Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø±Ø¨!`;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

/* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (Ù…Ù„Ù Ø´Ø®ØµÙŠ + Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©) */
document.getElementById("settingsBtn").addEventListener("click", () => {
  const menu = document.getElementById("settingsMenu");
  menu.classList.toggle("hidden");
});
function switchTab(tabId) {
  document.querySelectorAll("#profileTabs button").forEach(btn => btn.classList.remove("active"));
  document.querySelector(`#profileTabs button[onclick*='${tabId}']`).classList.add("active");
  document.querySelectorAll(".tab-section").forEach(div => div.classList.remove("active"));
  document.getElementById(tabId).classList.add("active");
}
function saveProfile() {
  const profileData = {
    name: document.getElementById("profileName").value,
    gender: document.getElementById("gender").value,
    age: document.getElementById("age").value,
    country: document.getElementById("country").value,
    relation: document.getElementById("relation").value,
    status: document.getElementById("userStatus").value,
  };
  // Ø§Ø­ÙØ¸ Ø£ÙŠØ¶Ù‹Ø§ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù† ÙƒØ§Ù†Øª Ø¸Ø§Ù‡Ø±Ø© Ø¨Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
  const imgEl = document.getElementById("profileImage");
  if (imgEl && imgEl.src) profileData.img = imgEl.src;
  localStorage.setItem("userProfile", JSON.stringify(profileData));
  alert("âœ… ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ.");
  document.getElementById("profileModal").style.display = "none";
}
function uploadImage() {
  const fileInput = document.createElement("input");
  fileInput.type = "file";
  fileInput.accept = "image/*";
  fileInput.onchange = e => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (event) {
        document.getElementById("profileImage").src = event.target.result;
        let profileData = JSON.parse(localStorage.getItem("userProfile") || '{}');
        profileData.img = event.target.result;
        localStorage.setItem("userProfile", JSON.stringify(profileData));
      }
      reader.readAsDataURL(file);
    }
  }
  fileInput.click();
}
window.addEventListener("load", () => {
  const profileData = JSON.parse(localStorage.getItem("userProfile"));
  if (profileData) {
    document.getElementById("profileName").value = profileData.name || "";
    document.getElementById("gender").value = profileData.gender || "";
    document.getElementById("age").value = profileData.age || "";
    document.getElementById("country").value = profileData.country || "";
    document.getElementById("relation").value = profileData.relation || "";
    document.getElementById("userStatus").value = profileData.status || "";
    if (profileData.img) {
      document.getElementById("profileImage").src = profileData.img;
    }
  }
});
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arabic Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Cairo', sans-serif; }
    .user-rank { padding: 2px 6px; border-radius: 4px; font-weight: bold; font-size: 12px; display: inline-block; margin-left: 4px; }
    .crown { background-color: gold; color: #000; }
    .star { background-color: silver; color: #000; }
    .shield { background-color: #3366ff; color: #fff; }
    #profileModal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: #012d36; border: 2px solid #01596d; border-radius: 10px; padding: 20px; z-index: 10000; display: none; width: 90%; max-width: 700px; color: white; }
    #profileHeader { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    #profileHeader img { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; cursor: pointer; background-color: black; }
    #profileTabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 16px; border-bottom:  1px solid #01596d; padding-bottom: 8px; overflow-x: auto; }
    #profileTabs button { background: none; border: none; padding: 8px 12px; font-weight: bold; color: #38bdf8; cursor: pointer; border-radius: 6px; white-space: nowrap; }
    #profileTabs button.active { background-color: #01404f; color: white; }
    .tab-section { display: none; }
    .tab-section.active { display: block; }
    .profile-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
    .profile-grid label { font-weight: bold; color: #38bdf8; display: block; margin-bottom: 4px; }
    .profile-grid select { background: #001D26; border: 1px solid #014f5f; color: white; border-radius: 4px; padding: 6px; width: 100%; }
  </style>
</head>
<body class="bg-[#011826] text-white min-h-screen flex flex-col">

<!-- Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
<div class="fixed top-4 right-4 z-50">
  <button id="settingsBtn" class="bg-[#01404f] px-3 py-2 rounded">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© -->
<div id="profileModal">
  <div id="profileHeader">
    <img id="profileImage" src="https://i.imgur.com/1Q9Z1Z1.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" onclick="uploadImage()">
    <div>
      <input id="profileName" class="text-xl font-bold bg-transparent border-none text-white focus:outline-none" placeholder="ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… âœï¸" />
      <div class="flex gap-2 text-sm mt-1">
        <input id="userStatus" class="bg-transparent border-none text-gray-300 focus:outline-none" placeholder="Ø§ÙƒØªØ¨ Ø­Ø§Ù„ØªÙƒ...">
      </div>
    </div>
  </div>

  <div id="profileTabs">
    <button onclick="switchTab('info')" class="active">Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</button>
    <button onclick="switchTab('friends')">Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</button>
    <button onclick="switchTab('ignore')">ØªØ¬Ø§Ù‡Ù„</button>
    <button onclick="switchTab('options')">Ø®ÙŠØ§Ø±Ø§Øª</button>
  </div>

  <div id="profileContent">
    <div id="info" class="tab-section active">
      <div class="profile-grid">
        <div>
          <label>Ø§Ù„Ø¬Ù†Ø³</label>
          <select id="gender"><option>Ø°ÙƒØ±</option><option>Ø£Ù†Ø«Ù‰</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø¹Ù…Ø±</label>
          <select id="age">
            <option>Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø±</option>
            <script>for(let i=18;i<=99;i++)document.write(`<option>${i}</option>`);</script>
          </select>
        </div>
        <div>
          <label>Ø§Ù„Ø¨Ù„Ø¯</label>
          <select id="country">
            <option>Ø§Ù„Ø£Ø±Ø¯Ù†</option><option>Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option><option>Ù…ØµØ±</option><option>Ø§Ù„Ù…ØºØ±Ø¨</option><option>Ø§Ù„Ø¹Ø±Ø§Ù‚</option><option>Ø³ÙˆØ±ÙŠØ§</option><option>Ù„Ø¨Ù†Ø§Ù†</option><option>ØªÙˆÙ†Ø³</option><option>Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option><option>Ù„ÙŠØ¨ÙŠØ§</option><option>Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</option><option>Ù‚Ø·Ø±</option><option>Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option><option>Ø¹Ù…Ø§Ù†</option><option>ÙÙ„Ø³Ø·ÙŠÙ†</option><option>Ø§Ù„ÙŠÙ…Ù†</option><option>Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option><option>Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§</option><option>Ø§Ù„ØµÙˆÙ…Ø§Ù„</option>
          </select>
        </div>
        <div>
          <label>Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©</label>
          <select id="relation"><option>Ø¹Ø¯Ù… Ø¥Ø¸Ù‡Ø§Ø±</option><option>Ø£Ø¹Ø²Ø¨</option><option>Ù…Ø±ØªØ¨Ø·</option></select>
        </div>
      </div>
    </div>

    <div id="friends" class="tab-section">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ù‡Ù†Ø§...</div>
    <div id="ignore" class="tab-section">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¬Ø§Ù‡Ù„ Ù‡Ù†Ø§...</div>

    <div id="options" class="tab-section">
      <div class="profile-grid">
        <div>
          <label>Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø²Ù…Ù†ÙŠ</label>
          <select><option>Asia/Riyadh</option><option>Asia/Amman</option></select>
        </div>
        <div>
          <label>Ù„ØºØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</label>
          <select><option>Arabic</option><option>English</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø°ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ± Ø®Ø§ØµØ©</label>
          <select><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option><option>Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙÙ‚Ø·</option></select>
        </div>
        <div>
          <label>Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ©</label>
          <select><option>Ù…ÙØªÙˆØ­Ø©</option><option>Ù…ØºÙ„Ù‚Ø©</option></select>
        </div>
        <div>
          <label>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµØ¯Ø§Ù‚Ø©</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ø·Ù„Ø¨ Ø§Ù„ØªØ­Ø¯Ø«</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ù…Ù† ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ù†Ù‚Ø§Ø·ÙŠ</label>
          <select><option>Ø£Ù†Ø§ ÙÙ‚Ø·</option><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option></select>
        </div>
        <div>
          <label>Ù…Ù† ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ø£ØµØ¯Ù‚Ø§Ø¦ÙŠ</label>
          <select><option>Ø£Ù†Ø§ ÙÙ‚Ø·</option><option>Ø§Ù„Ø¬Ù…ÙŠØ¹</option></select>
        </div>
        <div>
          <label>Ø¸Ù‡ÙˆØ± Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>Ø¥ÙŠÙ‚Ø§Ù</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø£ØµÙˆØ§Øª</label>
          <select><option>ØªØ´ØºÙŠÙ„</option><option>ØµØ§Ù…Øª</option></select>
        </div>
        <div>
          <label>Ø§Ù„Ø«ÙŠÙ…</label>
          <select><option>Lite</option><option>Dark</option></select>
        </div>
      </div>
    </div>

  </div>

  <div class="text-center mt-6">
    <button onclick="saveProfile()" class="bg-green-600 px-4 py-2 rounded font-bold">âœ”ï¸ Ø­ÙØ¸ ÙˆØ¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<!-- Ù‚Ø§Ø¦Ù…Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù†Ø¨Ø«Ù‚Ø© -->
<div id="settingsMenu" class="hidden fixed top-16 right-4 bg-[#012d36] rounded border border-[#01596d] z-50">
  <button onclick="document.getElementById('profileModal').style.display='block'" class="w-full px-4 py-2 border-b border-[#01596d] text-right">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</button>
  <button class="w-full px-4 py-2 border-b border-[#01596d] text-right">ğŸ“ Ø§Ù„ØºØ±Ù</button>
  <button onclick="alert('ğŸšª ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬')" class="w-full px-4 py-2 text-right">ğŸšª Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<script>
  document.getElementById("settingsBtn").addEventListener("click", () => {
    const menu = document.getElementById("settingsMenu");
    menu.classList.toggle("hidden");
  });

  function switchTab(tabId) {
    document.querySelectorAll("#profileTabs button").forEach(btn => btn.classList.remove("active"));
    document.querySelector(`#profileTabs button[onclick*='${tabId}']`).classList.add("active");
    document.querySelectorAll(".tab-section").forEach(div => div.classList.remove("active"));
    document.getElementById(tabId).classList.add("active");
  }

  function saveProfile() {
    const profileData = {
      name: document.getElementById("profileName").value,
      gender: document.getElementById("gender").value,
      age: document.getElementById("age").value,
      country: document.getElementById("country").value,
      relation: document.getElementById("relation").value,
      status: document.getElementById("userStatus").value,
    };
    localStorage.setItem("userProfile", JSON.stringify(profileData));
    alert("âœ… ØªÙ… Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ.");
    document.getElementById("profileModal").style.display = "none";
  }

  function uploadImage() {
    const fileInput = document.createElement("input");
    fileInput.type = "file";
    fileInput.accept = "image/*";
    fileInput.onchange = e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (event) {
          document.getElementById("profileImage").src = event.target.result;
        }
        reader.readAsDataURL(file);
      }
    }
    fileInput.click();
  }

  window.addEventListener("load", () => {
    const profileData = JSON.parse(localStorage.getItem("userProfile"));
    if (profileData) {
      document.getElementById("profileName").value = profileData.name || "";
      document.getElementById("gender").value = profileData.gender || "";
      document.getElementById("age").value = profileData.age || "";
      document.getElementById("country").value = profileData.country || "";
      document.getElementById("relation").value = profileData.relation || "";
      document.getElementById("userStatus").value = profileData.status || "";
    }
  });
</script>
</body>
</html>
