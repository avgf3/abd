export type TagLayout = {
  widthRatio: number;        // Ù†Ø³Ø¨Ø© Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù‚Ø·Ø± Ø§Ù„ØµÙˆØ±Ø© (1.0 = Ù†ÙØ³ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø©)
  xAdjustPx: number;         // Ø¥Ø²Ø§Ø­Ø© Ø£ÙÙ‚ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© (px)
  yAdjustPx: number;         // Ø¥Ø²Ø§Ø­Ø© Ø¹Ù…ÙˆØ¯ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© - Ù…ÙˆØ¬Ø¨ = Ù„Ù„Ø£Ø³ÙÙ„ØŒ Ø³Ø§Ù„Ø¨ = Ù„Ù„Ø£Ø¹Ù„Ù‰ (px)
  anchorY?: number;          // Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ§Ø¬ ÙÙŠ Ø§Ù„ØµÙˆØ±Ø© (0.3 = 30% Ù…Ù† Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„ØªØ§Ø¬ ÙŠØ¯Ø®Ù„)
  autoAnchor?: boolean;      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø³ÙÙ„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø±ÙØ¹ Ø§Ù„ØªØ§Ø¬
};

// ğŸ‘‘ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù…ÙˆØ­Ø¯ Ø§Ù„Ø¨Ø³ÙŠØ·: ÙƒÙ„ Ø§Ù„ØªÙŠØ¬Ø§Ù† ØªØªØ¨Ø¹ Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚
// Ù‡Ø°Ø§ ÙŠØ¬Ø¹Ù„ Ø§Ù„ØªÙŠØ¬Ø§Ù† ØªØ¨Ø¯Ùˆ Ù…Ø«Ù„ "Ø¹ØµØ¨Ø© Ø§Ù„Ø±Ø£Ø³" Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
export const DEFAULT_TAG_LAYOUT: TagLayout = {
  widthRatio: 1.10,    // Ø§Ù„ØªØ§Ø¬ Ø£Ø¹Ø±Ø¶ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© (10%)
  xAdjustPx: 0,        // ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ
  yAdjustPx: 0,        // Ø¨Ø¯ÙˆÙ† Ø¶Ø¨Ø· ÙŠØ¯ÙˆÙŠ â€” Ø§Ù„Ø«Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹
  anchorY: 0.05,       // 5% Ø¯Ø®ÙˆÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ â€” Ù‚Ø§Ø¹Ø¯Ø© Ù…ÙˆØ­Ù‘Ø¯Ø© Ø£Ø¨Ø³Ø· ÙˆØ£Ø¯Ù‚
  autoAnchor: true,    // ÙŠØ²ÙŠÙ„ Ø§Ù„Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø³ÙÙ„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
};

// ğŸ¯ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø®ØµØµØ© Ù„ÙƒÙ„ ØªØ§Ø¬ (ÙÙ‚Ø· Ø§Ù„ØªÙŠØ¬Ø§Ù† Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø¶Ø¨Ø· Ø®Ø§Øµ)
export const TAG_LAYOUTS: Record<number, TagLayout> = (() => {
  const map: Record<number, TagLayout> = {};

  // Ù…Ù„Ø¡ ÙƒÙ„ Ø§Ù„ØªÙŠØ¬Ø§Ù† Ø¨Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø£ÙˆÙ„Ø§Ù‹
  for (let i = 1; i <= 50; i++) {
    map[i] = { ...DEFAULT_TAG_LAYOUT };
  }

  // Overrides per-tag based on deep analysis and auto-generated file
  // anchorY is a fraction of basePx, matching ProfileImage.tsx logic.
  const set = (n: number, layout: Partial<TagLayout>) => {
    map[n] = { ...map[n], ...layout } as TagLayout;
  };

  // Try to load generated overrides (client/src/config/tagOverrides.json)
  try {
    // eslint-disable-next-line @typescript-eslint/no-var-requires
    const overrides: Record<string, Partial<TagLayout>> = require('./tagOverrides.json');
    for (const key of Object.keys(overrides)) {
      const num = parseInt(key, 10);
      if (!Number.isFinite(num)) continue;
      set(num, overrides[key]);
    }
  } catch {}

  // Fallback manual tweaks (kept minimal); generator file has priority
  // Example: if a tag still needs slight yAdjustment you can add it here.

  return map;
})();

export function getTagLayout(tagNumber?: number): TagLayout {
  if (!tagNumber) return DEFAULT_TAG_LAYOUT;
  return TAG_LAYOUTS[tagNumber] ?? DEFAULT_TAG_LAYOUT;
}
// AUTO-GENERATED-OVERRIDES-START
// Generated by tools/update-tag-layouts-from-recs.cjs
// tag 1: anchorY=0
// tag 2: anchorY=0.011
// tag 3: anchorY=0.021
// tag 4: anchorY=0
// tag 5: anchorY=0
// tag 6: anchorY=0.003
// tag 7: anchorY=0
// tag 8: anchorY=0
// tag 9: anchorY=0.03
// tag 10: anchorY=0
// tag 11: anchorY=0.011
// tag 12: anchorY=0
// tag 13: anchorY=0
// tag 14: anchorY=0
// tag 15: anchorY=0
// tag 16: anchorY=0
// tag 17: anchorY=0
// tag 18: anchorY=0.017
// tag 19: anchorY=0
// tag 20: anchorY=0
// tag 21: anchorY=0
// tag 22: anchorY=0
// tag 23: anchorY=0
// tag 24: anchorY=0
// tag 25: anchorY=0
// tag 26: anchorY=0
// tag 27: anchorY=0
// tag 28: anchorY=0
// tag 29: anchorY=0
// tag 30: anchorY=0
// tag 31: anchorY=0
// tag 32: anchorY=0
// tag 33: anchorY=0
// tag 34: anchorY=0
// AUTO-GENERATED-OVERRIDES-END