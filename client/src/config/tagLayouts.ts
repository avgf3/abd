export type TagLayout = {
  widthRatio: number;        // ูุณุจุฉ ุนุฑุถ ุงูุชุงุฌ ุฅูู ูุทุฑ ุงูุตูุฑุฉ (1.0 = ููุณ ุนุฑุถ ุงูุตูุฑุฉ)
  xAdjustPx: number;         // ุฅุฒุงุญุฉ ุฃูููุฉ ุฅุถุงููุฉ (px)
  yAdjustPx: number;         // ุฅุฒุงุญุฉ ุนููุฏูุฉ ุฅุถุงููุฉ - ููุฌุจ = ููุฃุณููุ ุณุงูุจ = ููุฃุนูู (px)
  anchorY?: number;          // ููุฏุงุฑ ุฏุฎูู ุงูุชุงุฌ ูู ุงูุตูุฑุฉ (0.3 = 30% ูู ุงุฑุชูุงุน ุงูุชุงุฌ ูุฏุฎู)
  autoAnchor?: boolean;      // ุญุณุงุจ ุงูุดูุงููุฉ ุงูุณูููุฉ ุชููุงุฆูุงู ูุฑูุน ุงูุชุงุฌ
};

// ๐ ุงููุงูุจ ุงูููุญุฏ ุงูุจุณูุท: ูู ุงูุชูุฌุงู ุชุชุจุน ููุณ ุงูููุทู
// ูุฐุง ูุฌุนู ุงูุชูุฌุงู ุชุจุฏู ูุซู "ุนุตุจุฉ ุงูุฑุฃุณ" ุงูุทุจูุนูุฉ
export const DEFAULT_TAG_LAYOUT: TagLayout = {
  widthRatio: 1.08,    // ุชูููู ุงูุนุฑุถ ุงูุงูุชุฑุงุถู ููููุงู ูุซุจุงุช ุฃูุถู
  xAdjustPx: 0,
  yAdjustPx: 0,        // ุฅูุบุงุก ุงูุถุจุท ุงูุนููุฏู ุงูุงูุชุฑุงุถู
  anchorY: 0.34,       // ุฏุฎูู ุฃุฎู ุงูุชุฑุงุถูุงู (ูููู ุชุฎุตูุตู ููู ุชุงุฌ)
  autoAnchor: false,   // ูุนุทู ุญุณุงุจ ุงูุดูุงููุฉ ูุฃููุง ูุณุชุฎุฏู overlapPx ุซุงุจุชุงู
};

// ๐ฏ ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ ููู ุชุงุฌ (ููุท ุงูุชูุฌุงู ุงูุชู ุชุญุชุงุฌ ุถุจุท ุฎุงุต)
export const TAG_LAYOUTS: Record<number, TagLayout> = (() => {
  const map: Record<number, TagLayout> = {};

  // ููุก ูู ุงูุชูุฌุงู ุจุงููุงูุจ ุงูุงูุชุฑุงุถู ุฃููุงู
  for (let i = 1; i <= 50; i++) {
    map[i] = { ...DEFAULT_TAG_LAYOUT };
  }

  // ุฏุงูุฉ ูุณุงุนุฏุฉ ููุชุนุฏูู ุงูุณุฑูุน
  const override = (n: number, layout: Partial<TagLayout>) => {
    map[n] = { ...map[n], ...layout } as TagLayout;
  };

  // ูู ุงูุชูุฌุงู ููุณ ุงูุฅุนุฏุงุฏุงุช - ุจุณุงุทุฉ ููุถูุญ
  // ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ูุงููุฉ ููู ุดูุก

  return map;
})();

export function getTagLayout(tagNumber?: number): TagLayout {
  if (!tagNumber) return DEFAULT_TAG_LAYOUT;
  return TAG_LAYOUTS[tagNumber] ?? DEFAULT_TAG_LAYOUT;
}
