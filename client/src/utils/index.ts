export const getCountryFlag = (country?: string): string | null => {
  if (!country) return null;
  const text = country.trim();
  if (!text) return null;
  
  // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¨Ù„Ø¯Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ø¹ Ø£Ø¹Ù„Ø§Ù…Ù‡Ø§
  const arabicCountries: Record<string, string> = {
    Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©: 'ðŸ‡¸ðŸ‡¦',
    Ù…ØµØ±: 'ðŸ‡ªðŸ‡¬',
    Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª: 'ðŸ‡¦ðŸ‡ª',
    Ø§Ù„Ø£Ø±Ø¯Ù†: 'ðŸ‡¯ðŸ‡´',
    Ø§Ù„Ø¹Ø±Ø§Ù‚: 'ðŸ‡®ðŸ‡¶',
    Ø³ÙˆØ±ÙŠØ§: 'ðŸ‡¸ðŸ‡¾',
    Ù„Ø¨Ù†Ø§Ù†: 'ðŸ‡±ðŸ‡§',
    ØªÙˆÙ†Ø³: 'ðŸ‡¹ðŸ‡³',
    Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±: 'ðŸ‡©ðŸ‡¿',
    Ù„ÙŠØ¨ÙŠØ§: 'ðŸ‡±ðŸ‡¾',
    Ù‚Ø·Ø±: 'ðŸ‡¶ðŸ‡¦',
    Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†: 'ðŸ‡§ðŸ‡­',
    Ø¹Ù…Ø§Ù†: 'ðŸ‡´ðŸ‡²',
    ÙÙ„Ø³Ø·ÙŠÙ†: 'ðŸ‡µðŸ‡¸',
    Ø§Ù„ÙŠÙ…Ù†: 'ðŸ‡¾ðŸ‡ª',
    Ø§Ù„Ø³ÙˆØ¯Ø§Ù†: 'ðŸ‡¸ðŸ‡©',
    Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§: 'ðŸ‡²ðŸ‡·',
    Ø§Ù„ØµÙˆÙ…Ø§Ù„: 'ðŸ‡¸ðŸ‡´',
    Ø§Ù„Ù…ØºØ±Ø¨: 'ðŸ‡²ðŸ‡¦',
    Ø¬ÙŠØ¨ÙˆØªÙŠ: 'ðŸ‡©ðŸ‡¯',
    'Ø¬Ø²Ø± Ø§Ù„Ù‚Ù…Ø±': 'ðŸ‡°ðŸ‡²',
    ØªØ±ÙƒÙŠØ§: 'ðŸ‡¹ðŸ‡·',
    Ø¥ÙŠØ±Ø§Ù†: 'ðŸ‡®ðŸ‡·',
    Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†: 'ðŸ‡¦ðŸ‡«',
    Ø¨Ø§ÙƒØ³ØªØ§Ù†: 'ðŸ‡µðŸ‡°',
    Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´: 'ðŸ‡§ðŸ‡©',
    Ø¥Ù†Ø¯ÙˆÙ†ÙŠØ³ÙŠØ§: 'ðŸ‡®ðŸ‡©',
    Ù…Ø§Ù„ÙŠØ²ÙŠØ§: 'ðŸ‡²ðŸ‡¾',
    Ø¨Ø±ÙˆÙ†Ø§ÙŠ: 'ðŸ‡§ðŸ‡³',
    Ø§Ù„ÙÙ„Ø¨ÙŠÙ†: 'ðŸ‡µðŸ‡­',
    ØªØ§ÙŠÙ„Ø§Ù†Ø¯: 'ðŸ‡¹ðŸ‡­',
    Ø³Ù†ØºØ§ÙÙˆØ±Ø©: 'ðŸ‡¸ðŸ‡¬',
    Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§: 'ðŸ‡¬ðŸ‡§',
    Ø£Ù…Ø±ÙŠÙƒØ§: 'ðŸ‡ºðŸ‡¸',
    ÙƒÙ†Ø¯Ø§: 'ðŸ‡¨ðŸ‡¦',
    Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§: 'ðŸ‡¦ðŸ‡º',
    Ø£Ù„Ù…Ø§Ù†ÙŠØ§: 'ðŸ‡©ðŸ‡ª',
    ÙØ±Ù†Ø³Ø§: 'ðŸ‡«ðŸ‡·',
    Ø¥ÙŠØ·Ø§Ù„ÙŠØ§: 'ðŸ‡®ðŸ‡¹',
    Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§: 'ðŸ‡ªðŸ‡¸',
    Ø§Ù„Ø¨Ø±ØªØºØ§Ù„: 'ðŸ‡µðŸ‡¹',
    Ù‡ÙˆÙ„Ù†Ø¯Ø§: 'ðŸ‡³ðŸ‡±',
    Ø¨Ù„Ø¬ÙŠÙƒØ§: 'ðŸ‡§ðŸ‡ª',
    Ø³ÙˆÙŠØ³Ø±Ø§: 'ðŸ‡¨ðŸ‡­',
    Ø§Ù„Ù†Ù…Ø³Ø§: 'ðŸ‡¦ðŸ‡¹',
    Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ: 'ðŸ‡©ðŸ‡°',
    Ø§Ù„Ø³ÙˆÙŠØ¯: 'ðŸ‡¸ðŸ‡ª',
    Ø§Ù„Ù†Ø±ÙˆÙŠØ¬: 'ðŸ‡³ðŸ‡´',
    ÙÙ†Ù„Ù†Ø¯Ø§: 'ðŸ‡«ðŸ‡®',
    Ø±ÙˆØ³ÙŠØ§: 'ðŸ‡·ðŸ‡º',
    Ø¨ÙˆÙ„Ù†Ø¯Ø§: 'ðŸ‡µðŸ‡±',
    Ø§Ù„ØªØ´ÙŠÙƒ: 'ðŸ‡¨ðŸ‡¿',
    Ø§Ù„Ù…Ø¬Ø±: 'ðŸ‡­ðŸ‡º',
    Ø§Ù„ÙŠÙˆÙ†Ø§Ù†: 'ðŸ‡¬ðŸ‡·',
    Ø¨Ù„ØºØ§Ø±ÙŠØ§: 'ðŸ‡§ðŸ‡¬',
    Ø±ÙˆÙ…Ø§Ù†ÙŠØ§: 'ðŸ‡·ðŸ‡´',
    ÙƒØ±ÙˆØ§ØªÙŠØ§: 'ðŸ‡­ðŸ‡·',
    ØµØ±Ø¨ÙŠØ§: 'ðŸ‡·ðŸ‡¸',
    Ø§Ù„Ø¨ÙˆØ³Ù†Ø©: 'ðŸ‡§ðŸ‡¦',
    Ø§Ù„ØµÙŠÙ†: 'ðŸ‡¨ðŸ‡³',
    Ø§Ù„ÙŠØ§Ø¨Ø§Ù†: 'ðŸ‡¯ðŸ‡µ',
    ÙƒÙˆØ±ÙŠØ§: 'ðŸ‡°ðŸ‡·',
    Ø§Ù„Ù‡Ù†Ø¯: 'ðŸ‡®ðŸ‡³',
    Ù†ÙŠØ¨Ø§Ù„: 'ðŸ‡³ðŸ‡µ',
    Ø³Ø±ÙŠÙ„Ø§Ù†ÙƒØ§: 'ðŸ‡±ðŸ‡°',
    Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„: 'ðŸ‡§ðŸ‡·',
    Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†: 'ðŸ‡¦ðŸ‡·',
    Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ: 'ðŸ‡²ðŸ‡½',
  };
  
  // Ø£ÙˆÙ„Ø§Ù‹: ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¨Ù„Ø¯Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
  if (arabicCountries[text]) {
    return arabicCountries[text];
  }
  
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø¨ÙˆØªØ§Øª
  if (text === 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' || text === 'ØºÙŠØ±_Ù…Ø­Ø¯Ø¯' || text === 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ') {
    return 'ðŸŒ'; // Ø¹Ù„Ù… Ø§Ù„Ø£Ø±Ø¶ ÙƒØ±Ù…Ø² Ø§ÙØªØ±Ø§Ø¶ÙŠ
  }
  
  // Ø¥Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¯Ø®Ù„ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ø¹Ù„Ù… Ù…Ø¨Ø§Ø´Ø±Ø©
  const chars = Array.from(text);
  const isRI = (cp: number) => cp >= 0x1f1e6 && cp <= 0x1f1ff;
  if (chars.length >= 2) {
    const cp0 = chars[0].codePointAt(0) || 0;
    const cp1 = chars[1].codePointAt(0) || 0;
    if (isRI(cp0) && isRI(cp1)) return chars[0] + chars[1];
  }
  
  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØµÙŠØºØ© ISO-2 Ù…Ø«Ù„ SAØŒ USØŒ JO... Ù†Ø­ÙˆÙ„Ù‡Ø§ Ù„Ø¹Ù„Ù…
  const iso = text.replace(/[^A-Za-z]/g, '').toUpperCase();
  if (iso.length === 2) {
    const base = 0x1f1e6;
    const a = iso.charCodeAt(0) - 65;
    const b = iso.charCodeAt(1) - 65;
    if (a >= 0 && a < 26 && b >= 0 && b < 26) {
      return String.fromCodePoint(base + a) + String.fromCodePoint(base + b);
    }
  }
  
  return null;
};

