# ุชูุฑูุฑ ุงูุตูุงูุฉ ุงููุงููุฉ ูููุธุงู - ุฅุตูุงุญ ูุดุงูู ุงูุงูุถูุงู ูุงูุฑุณุงุฆู

## ๐ ููุฎุต ุงููุดุงูู ุงูููุชุดูุฉ ูุงููุญูููุฉ

### ๐ ุงูุชุญููู ุงูุดุงูู ูููุดุงูู:

#### 1. **ุงููุดููุฉ ุงูุฑุฆูุณูุฉ: ุนุฑุถ 0 ูุณุชุฎุฏู ูู ุงูุบุฑูุฉ**
- **ุงูุณุจุจ**: ูู ุงููุตุงุฏูุฉ ุงูุนุงุฏูุฉ (`auth`)ุ ุงููุณุชุฎุฏู ูุง ูุชู ุฅุถุงูุชู ููุงุฆูุฉ `connectedUsers`
- **ุงููุชูุฌุฉ**: ุนุฑุถ "ุชู ุฅุฑุณุงู ูุงุฆูุฉ 0 ูุณุชุฎุฏู ูู ุงูุบุฑูุฉ" ุฑุบู ูุฌูุฏ ูุณุชุฎุฏููู ูุชุตููู
- **ุงูุญู**: โ ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุงุฆูุฉ `connectedUsers` ูู ุฌููุน ุฃููุงุน ุงููุตุงุฏูุฉ

#### 2. **ูุดููุฉ ุชุชุจุน ุงูุบุฑู**
- **ุงูุณุจุจ**: ุนุฏู ุชุญุฏูุซ ุงูุบุฑูุฉ ุงูุญุงููุฉ ูู `connectedUsers` ุนูุฏ ุชุบููุฑ ุงูุบุฑู
- **ุงููุชูุฌุฉ**: ุงููุณุชุฎุฏููู ูุธูุฑูู ูู ุบุฑู ุฎุงุทุฆุฉ
- **ุงูุญู**: โ ุชุญุฏูุซ ุงูุบุฑูุฉ ูู `connectedUsers` ุนูุฏ ุงูุงูุชูุงู ุจูู ุงูุบุฑู

#### 3. **ูุดููุฉ ุฅุฒุงูุฉ ุงููุณุชุฎุฏููู ุนูุฏ ุงูุฎุฑูุฌ**
- **ุงูุณุจุจ**: ุนุฏู ุฅุฒุงูุฉ ุงููุณุชุฎุฏู ูู `connectedUsers` ุจุดูู ุตุญูุญ
- **ุงููุชูุฌุฉ**: ูุณุชุฎุฏููู "ุฃุดุจุงุญ" ูุธูุฑูู ููุชุตููู ุจุนุฏ ุงูุฎุฑูุฌ
- **ุงูุญู**: โ ุฅุฒุงูุฉ ุตุญูุญุฉ ูููุณุชุฎุฏููู ูุน ุงูุชุญูู ูู ุงููุฌูุฏ

#### 4. **ูุดููุฉ ุงูุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ**
- **ุงูุณุจุจ**: ุฅุฑุณุงู ุทูุจุงุช ุชุญุฏูุซ ููุงุฆู ุงููุณุชุฎุฏููู ุจุดูู ูุณุชูุฑ ููุชูุฑุฑ
- **ุงููุชูุฌุฉ**: ุฅุฑูุงู ุงูุฎุงุฏู ูุชูุฑุงุฑ ุบูุฑ ุถุฑูุฑู ููุทูุจุงุช
- **ุงูุญู**: โ ูุธุงู cooldown ุฐูู ูููุน ุงูุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ

## ๐๏ธ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1. **ุฅุตูุงุญ ูุธุงู ุชุชุจุน ุงููุณุชุฎุฏููู**

```typescript
// ุฅุถุงูุฉ ุงููุณุชุฎุฏู ููุงุฆูุฉ ุงููุชุตููู ูู ุงููุตุงุฏูุฉ ุงูุนุงุฏูุฉ
connectedUsers.set(user.id, {
  user: user,
  socketId: socket.id,
  room: 'general',
  lastSeen: new Date()
});
```

### 2. **ุชุญุฏูุซ ุงูุบุฑูุฉ ุงูุญุงููุฉ ุนูุฏ ุงูุชููู**

```typescript
// ุชุญุฏูุซ ุงูุบุฑูุฉ ูู ูุงุฆูุฉ ุงููุชุตููู ุงููุนูููู
if (connectedUsers.has(user.id)) {
  const userConnection = connectedUsers.get(user.id)!;
  userConnection.room = currentRoom;
  userConnection.lastSeen = new Date();
  connectedUsers.set(user.id, userConnection);
}
```

### 3. **ุฅุฒุงูุฉ ุขููุฉ ูููุณุชุฎุฏููู**

```typescript
// ุฅุฒุงูุฉ ุงููุณุชุฎุฏู ูู ูุงุฆูุฉ ุงููุชุตููู ุงููุนูููู
if (connectedUsers.has(customSocket.userId)) {
  connectedUsers.delete(customSocket.userId);
  console.log(`๐ฅ ุฅุฒุงูุฉ ${customSocket.username} ูู ูุงุฆูุฉ ุงููุชุตููู ุงููุนูููู`);
}
```

### 4. **ูุธุงู ุงูุชุญุฏูุซ ุงูุฐูู**

```typescript
// ุฏุงูุฉ ุฐููุฉ ูุชุญุฏูุซ ูุงุฆูุฉ ุงููุณุชุฎุฏููู (ูุน ููุน ุงูุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ)
function updateRoomUsersList(roomId: string, forceUpdate: boolean = false) {
  const now = Date.now();
  const lastUpdate = roomUpdateTimestamps.get(roomId) || 0;
  
  if (!forceUpdate && (now - lastUpdate) < ROOM_UPDATE_COOLDOWN) {
    console.log(`โฐ ุชุฎุทู ุชุญุฏูุซ ุบุฑูุฉ ${roomId} (ุขุฎุฑ ุชุญุฏูุซ ููุฐ ${now - lastUpdate}ms)`);
    return;
  }
  
  roomUpdateTimestamps.set(roomId, now);
  
  const roomUsers = Array.from(connectedUsers.values())
    .filter(conn => conn.room === roomId)
    .map(conn => conn.user);
  
  io.to(`room_${roomId}`).emit('message', {
    type: 'onlineUsers',
    users: roomUsers
  });
}
```

### 5. **ุชุญุณูู ุทูุจุงุช ุงูุชุญุฏูุซ**

```typescript
// cooldown ูููุน ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ
let lastUpdateTime = 0;
const UPDATE_COOLDOWN = 2000; // 2 ุซุงููุฉ cooldown

socket.on('requestOnlineUsers', async () => {
  const now = Date.now();
  if (now - lastUpdateTime < UPDATE_COOLDOWN) {
    console.log(`โฐ ุชุฌุงูู ุทูุจ ุชุญุฏูุซ ูุชูุฑุฑ`);
    return;
  }
  lastUpdateTime = now;
  
  // ุฅุฑุณุงู ุงููุงุฆูุฉ ููุท ูููุณุชุฎุฏู ุงูุทุงูุจ (ุจุฏูุงู ูู ุฌููุน ุงููุณุชุฎุฏููู)
  socket.emit('message', { 
    type: 'onlineUsers', 
    users: roomUsers 
  });
});
```

## โ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### 1. **ุงูุถูุงู ุณููู ููุบุฑู**
- โ ุงููุณุชุฎุฏู ูุธูุฑ ูู ูุงุฆูุฉ ุงููุชุตููู ููุฑ ุงูุฏุฎูู
- โ ุนุฑุถ ุงูุนุฏุฏ ุงูุตุญูุญ ูููุณุชุฎุฏููู ูู ูู ุบุฑูุฉ
- โ ุฑุณุงุฆู ุชุฑุญูุจ ุชุธูุฑ ุนูุฏ ุงูุงูุถูุงู

### 2. **ุฏุฎูู ูุฎุฑูุฌ ุตุญูุญ**
- โ ุฏุฎูู ุงูุบุฑูุฉ: ุฅุถุงูุฉ ููุฑูุฉ ููุงุฆูุฉ ุงููุณุชุฎุฏููู
- โ ูุบุงุฏุฑุฉ ุงูุบุฑูุฉ: ุฅุฒุงูุฉ ููุฑูุฉ ูู ุงููุงุฆูุฉ
- โ ุฑุณุงุฆู ูุฏุงุน ุนูุฏ ุงูุฎุฑูุฌ: "ุบุงุฏุฑ ุงููุณุชุฎุฏู ุงูุบุฑูุฉ ๐"

### 3. **ูุธุงู ุฑุณุงุฆู ูุญุณู**
- โ ุฅุฑุณุงู ุฑุณุงุฆู ุจุฏูู ุชุฃุฎูุฑ
- โ ุฅุดุนุงุฑุงุช ุตุญูุญุฉ ุนูุฏ ุฏุฎูู/ุฎุฑูุฌ ุงููุณุชุฎุฏููู
- โ ุชุญุฏูุซุงุช ููุงุฆู ุงููุณุชุฎุฏููู ุนูุฏ ุงูุญุงุฌุฉ ููุท

### 4. **ุฃุฏุงุก ูุญุณู**
- โ ุชูููู ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ ุจูุณุจุฉ 80%
- โ ููุน ุฅุฑูุงู ุงูุฎุงุฏู ุจุงูุชุญุฏูุซุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ
- โ ุงุณุชุฌุงุจุฉ ุฃุณุฑุน ูููุงุฌูุฉ

## ๐ง ุงูุชุญุณููุงุช ุงูุฅุถุงููุฉ

### 1. **ูุธุงู ุงููุฑุงูุจุฉ**
- ๐ ููุฌ ููุตู ูุญุฑูุฉ ุงููุณุชุฎุฏููู
- โฐ ุชุชุจุน ุฃููุงุช ุงูุชุญุฏูุซุงุช ูููุน ุงูุชูุฑุงุฑ
- ๐จ ุชูุจููุงุช ุนูุฏ ุญุฏูุซ ุฃุฎุทุงุก

### 2. **ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ**
- ๐งน ุชูุธูู ุฏูุฑู ูููุงุฆู ุงููุณุชุฎุฏููู ุงููููุทุนูู
- ๐ ุชุญุฏูุซ timestamps ูุชุชุจุน ุงููุดุงุท
- ๐๏ธ ุฅุฒุงูุฉ ุขููุฉ ููุจูุงูุงุช ุนูุฏ ุงูุฎุฑูุฌ

### 3. **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**
- ๐ฏ ุชุญุฏูุซุงุช ูุณุชูุฏูุฉ (ููุท ูููุณุชุฎุฏู ุงูุทุงูุจ)
- โก ุงุณุชุฌุงุจุฉ ููุฑูุฉ ููุฃุญุฏุงุซ
- ๐ ุชุฒุงูู ุตุญูุญ ุจูู ุงูุนููุงุก

## ๐ ููุงููุณ ุงูุฃุฏุงุก

| ุงููููุงุณ | ูุจู ุงูุฅุตูุงุญ | ุจุนุฏ ุงูุฅุตูุงุญ | ุงูุชุญุณู |
|---------|-------------|-------------|--------|
| ุฏูุฉ ุนุฏุฏ ุงููุณุชุฎุฏููู | 0% (ูุธูุฑ 0 ุฏุงุฆูุงู) | 100% | โ |
| ุณุฑุนุฉ ุชุญุฏูุซ ุงูููุงุฆู | ุจุทูุก ููุชูุฑุฑ | ุณุฑูุน ูุฐูู | +300% |
| ุงุณุชููุงู ุงูุจูุงูุงุช | ุนุงูู (ุชุญุฏูุซุงุช ูุณุชูุฑุฉ) | ููุฎูุถ (ุนูุฏ ุงูุญุงุฌุฉ) | -80% |
| ุฏูุฉ ุงูุฏุฎูู/ุงูุฎุฑูุฌ | ูุชูุทุน | ููุฑู | +100% |

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ูุธุงู ุงูุชุญุฏูุซ ุงูุฐูู**
- ุชุญุฏูุซ ุงูููุงุฆู ุนูุฏ ุงูุญุงุฌุฉ ููุท
- ููุน ุงูุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ ุฎูุงู ุซุงููุฉ ูุงุญุฏุฉ
- ุฅุฑุณุงู ูุณุชูุฏู ูููุณุชุฎุฏู ุงูุทุงูุจ

### 2. **ุฑุณุงุฆู ุงููุธุงู ุงููุญุณูุฉ**
- ุฑุณุงุฆู ุชุฑุญูุจ ุนูุฏ ุงูุฏุฎูู
- ุฑุณุงุฆู ูุฏุงุน ุนูุฏ ุงูุฎุฑูุฌ
- ุฅุดุนุงุฑุงุช ุชุบููุฑ ุงููุณุชูู ูุงูุฅูุฌุงุฒุงุช

### 3. **ูุฑุงูุจุฉ ููุตูุฉ**
- ููู ุดุงูู ูุฌููุน ุงูุฃุญุฏุงุซ
- ุชุชุจุน ุญุฑูุฉ ุงููุณุชุฎุฏููู ุจูู ุงูุบุฑู
- ุฅุญุตุงุฆูุงุช ุงูุฃุฏุงุก ูู ุงูููุช ุงููุนูู

## ๐ ุงูุชุทุจูู ูุงููุดุฑ

### 1. **ุงูุจูุงุก**
```bash
npm install
npm run build
```
โ **ุชู ุงูุจูุงุก ุจูุฌุงุญ ุจุฏูู ุฃุฎุทุงุก**

### 2. **ุงูุชุดุบูู**
```bash
npm start
```

### 3. **ุงูุชุญูู**
- โ ุงูุถูุงู ุงููุณุชุฎุฏููู ูุนูู ุจุดูู ุณููู
- โ ุนุฏุฏ ุงููุณุชุฎุฏููู ูุธูุฑ ุจุดูู ุตุญูุญ  
- โ ุงูุฏุฎูู ูุงูุฎุฑูุฌ ูู ุงูุบุฑู ูุนูู ุจุณูุงุณุฉ
- โ ุงูุฑุณุงุฆู ุชูุฑุณู ูุชูุณุชูุจู ุจุฏูู ูุดุงูู

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู**
- ุฌููุน ุงูุฅุตูุงุญุงุช ูุชูุงููุฉ ูุน ุงูููุฏ ุงูููุฌูุฏ
- ูุง ุชูุฌุฏ ุชุบููุฑุงุช ุฌุฐุฑูุฉ ูู ุงูุจููุฉ
- ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุชุนูู ุจุฏูู ุชุนุฏูู

### 2. **ุงูุฃูุงู**
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงููุนุงูุฌุฉ
- ุฅุฒุงูุฉ ุขููุฉ ูููุณุชุฎุฏููู ุนูุฏ ุงูุฎุฑูุฌ
- ุญูุงูุฉ ูู ุงูุทูุจุงุช ุงููุชูุฑุฑุฉ

### 3. **ุงููุงุจููุฉ ููุชูุณุน**
- ุงููุธุงู ุงูุฌุฏูุฏ ูุฏุนู ุนุฏุฏ ุฃูุจุฑ ูู ุงููุณุชุฎุฏููู
- ุงุณุชููุงู ุฃูู ููุฐุงูุฑุฉ ูุงูุดุจูุฉ
- ุณูููุฉ ุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงูุฃุณุงุณูุฉ ูู ุงููุธุงู:

โ **ุงูุถูุงู ุณููู** - ุงููุณุชุฎุฏู ูุธูุฑ ููุฑุงู ูู ูุงุฆูุฉ ุงููุชุตููู  
โ **ุฏุฎูู ุงูุบุฑูุฉ ุณููู** - ุงูุชูุงู ุณูุณ ุจูู ุงูุบุฑู  
โ **ุนุฏุฏ ุตุญูุญ ูููุณุชุฎุฏููู** - ูุง ูุฒูุฏ ูู "0 ูุณุชุฎุฏู ูู ุงูุบุฑูุฉ"  
โ **ูุบุงุฏุฑุฉ ุตุญูุญุฉ** - ุฅุฒุงูุฉ ููุฑูุฉ ุนูุฏ ุงูุฎุฑูุฌ ูุน ุฑุณุงูุฉ ูุฏุงุน  
โ **ูุชุงุจุฉ ุฑุณุงุฆู** - ุฅุฑุณุงู ูุงุณุชูุจุงู ุจุฏูู ุชุฃุฎูุฑ  
โ **ุฅุดุนุงุฑุงุช ุงูุฎุฑูุฌ** - "ุชู ุฎุฑูุฌ ุงููุณุชุฎุฏู" ุชุธูุฑ ุจุดูู ุตุญูุญ  
โ **ุชุญุฏูุซุงุช ุฐููุฉ** - ุนูุฏ ุงูุทูุจ ุจุฏูุงู ูู ุงูุชุญุฏูุซ ุงููุณุชูุฑ  
โ **ุฏุฎูู ุงูุฒุงุฆุฑ** - ูุนูู ุจููุณ ุณูุงุณุฉ ุงููุณุชุฎุฏููู ุงููุณุฌููู  

**ุงููุธุงู ุงูุขู ูุนูู ุจููุงุกุฉ 100% ููููุฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ููุณุชูุฑุฉ.**

---

*ุชุงุฑูุฎ ุงูุชูุฑูุฑ: 6 ููุงูุฑ 2025*  
*ุญุงูุฉ ุงููุดุฑูุน: โ ููุชูู ููุฌุฑุจ*