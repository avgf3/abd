# ุฅุตูุงุญ ุฎุทุฃ ุฅุถุงูุฉ ููุงุท ุชุณุฌูู ุงูุฏุฎูู

## ุงููุดููุฉ
ูุงูุช ุชุธูุฑ ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุชุงููุฉ ุนูุฏ ุชุณุฌูู ุฏุฎูู ุงููุณุชุฎุฏููู:
```
ุฎุทุฃ ูู ุฅุถุงูุฉ ููุงุท ุชุณุฌูู ุงูุฏุฎูู: Error: ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ
```

## ุณุจุจ ุงููุดููุฉ
ูุงู ุงูุณุจุจ ูู ูุฐุง ุงูุฎุทุฃ ุฃู ูุธุงู ุงูููุงุท ูุงู ูุญุงูู ุฅุถุงูุฉ ููุงุท ุชุณุฌูู ุงูุฏุฎูู ุงููููู ูุฌููุน ุงููุณุชุฎุฏููู ุจูุง ูู ุฐูู:
1. **ุงููุณุชุฎุฏููู ุงูุถููู (Guests)**: ุงูุฐูู ูุง ูุฌุจ ุฃู ูุญุตููุง ุนูู ููุงุท
2. **ุงููุณุชุฎุฏููู ุบูุฑ ุงูููุฌูุฏูู**: ุจุณุจุจ ูุดุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃู ูุนุฑูุงุช ุบูุฑ ุตุญูุญุฉ

## ุงูุญู ุงูููุทุจู

### 1. ุชุญุณูู ุฏุงูุฉ `addDailyLoginPoints`
ุชู ุชุนุฏูู ุงูุฏุงูุฉ ูู `server/services/pointsService.ts` ูุชุดูู ูุญูุตุงุช ุดุงููุฉ:

```typescript
async addDailyLoginPoints(userId: number): Promise<any> {
  try {
    // ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ุฃููุงู
    const user = await storage.getUser(userId);
    if (!user) {
      console.log(`ุชู ุชุฌุงูู ููุงุท ุชุณุฌูู ุงูุฏุฎูู - ุงููุณุชุฎุฏู ${userId} ุบูุฑ ููุฌูุฏ`);
      return null;
    }

    // ุงูุชุญูู ูู ููุน ุงููุณุชุฎุฏู - ุงูุถููู ูุง ูุญุตููู ุนูู ููุงุท
    if (user.userType === 'guest') {
      console.log(`ุชู ุชุฌุงูู ููุงุท ุชุณุฌูู ุงูุฏุฎูู - ุงููุณุชุฎุฏู ${userId} ุถูู`);
      return null;
    }

    // ุจุงูู ุงูููุฏ...
  } catch (error) {
    console.error('ุฎุทุฃ ูู ุฅุถุงูุฉ ููุงุท ุชุณุฌูู ุงูุฏุฎูู ุงููููู:', error);
    return null;
  }
}
```

### 2. ุชุญุณูู ุฏุงูุฉ `addMessagePoints`
ุชู ุฅุถุงูุฉ ูุญูุตุงุช ููุงุซูุฉ ูููุงุท ุงูุฑุณุงุฆู:

```typescript
async addMessagePoints(userId: number): Promise<any> {
  try {
    // ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูููุนู
    const user = await storage.getUser(userId);
    if (!user || user.userType === 'guest') {
      return null; // ุงูุถููู ูุง ูุญุตููู ุนูู ููุงุท
    }
    return this.addPoints(userId, DEFAULT_POINTS_CONFIG.MESSAGE_SENT, 'MESSAGE_SENT');
  } catch (error) {
    console.error('ุฎุทุฃ ูู ุฅุถุงูุฉ ููุงุท ุงูุฑุณุงูุฉ:', error);
    return null;
  }
}
```

### 3. ุชุญุณูู ุฏุงูุฉ `checkAchievement`
ุชู ุฅุถุงูุฉ ูุญูุตุงุช ููุฅูุฌุงุฒุงุช:

```typescript
async checkAchievement(userId: number, achievementType: string) {
  try {
    // ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูููุนู
    const user = await storage.getUser(userId);
    if (!user || user.userType === 'guest') {
      return null; // ุงูุถููู ูุง ูุญุตููู ุนูู ููุงุท ุฅูุฌุงุฒุงุช
    }
    // ุจุงูู ุงูููุฏ...
  } catch (error) {
    console.error('ุฎุทุฃ ูู ูุญุต ุงูุฅูุฌุงุฒ:', error);
    return null;
  }
}
```

## ุงูููุงุฆุฏ ูู ูุฐุง ุงูุฅุตูุงุญ

### โ ูุดุงูู ุชู ุญููุง:
1. **ุฅุฒุงูุฉ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุฒุนุฌุฉ**: ูู ุชุธูุฑ ุฑุณุงูุฉ "ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ" ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
2. **ูุนุงูุฌุฉ ุขููุฉ ููุถููู**: ุงููุณุชุฎุฏููู ุงูุถููู ูู ูุชุณุจุจูุง ูู ุฃุฎุทุงุก ุนูุฏ ูุญุงููุฉ ุฅุถุงูุฉ ููุงุท
3. **ุงุณุชูุฑุงุฑ ุงููุธุงู**: ุงููุธุงู ุฃุตุจุญ ุฃูุซุฑ ููุงููุฉ ููุฃุฎุทุงุก ุงููุชุนููุฉ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุฃุฏุงุก ูุญุณูู**: ุชุฌูุจ ุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ููุถููู

### ๐ ุณููู ุงููุธุงู ุงูุฌุฏูุฏ:
- **ุงููุณุชุฎุฏููู ุงูุฃุนุถุงุก**: ูุญุตููู ุนูู ููุงุท ุชุณุฌูู ุงูุฏุฎูู ูุงููุนุชุงุฏ
- **ุงููุณุชุฎุฏููู ุงูุถููู**: ูุง ูุญุตููู ุนูู ููุงุท (ุณููู ุตุญูุญ)
- **ุงููุณุชุฎุฏููู ุบูุฑ ุงูููุฌูุฏูู**: ูุชู ุชุฌุงูููู ุจุฏูู ุฃุฎุทุงุก
- **ุฃุฎุทุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุชู ุงูุชุนุงูู ูุนูุง ุจุทุฑููุฉ ุขููุฉ

## ุงููุชูุงูููุฉ ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ
ูุฐุง ุงูุฅุตูุงุญ ูุชูุงูู ุชูุงูุงู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ููุง ูุคุซุฑ ุนูู:
- ุนูู ูุธุงู ุงูููุงุท ููุฃุนุถุงุก
- ูุงุฌูุฉ ุงููุณุชุฎุฏู
- ููุงุนุฏ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ

## ููุงุญุธุงุช ููุชุทููุฑ ุงููุณุชูุจูู
- ูููู ุฅุถุงูุฉ ูุธุงู ุชุณุฌูู (logging) ุฃูุซุฑ ุชูุตููุงู ููุฑุงูุจุฉ ุฃุฏุงุก ุงููุธุงู
- ูููู ุฅุถุงูุฉ ูุนุงููุฑ ุฃุฎุฑู ูููุญ ุงูููุงุท (ูุซู ูุณุชูู ุงูุนุถููุฉ)
- ูููู ุชุทููุฑ ูุธุงู ุฅูุฌุงุฒุงุช ุฃูุซุฑ ุชุนููุฏุงู ููุฃุนุถุงุก ููุท