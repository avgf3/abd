services:
  - type: web
    name: arabic-chat-app
    env: node
    region: frankfurt  # Ø£Ù‚Ø±Ø¨ Ø³ÙŠØ±ÙØ± Ù„Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    buildCommand: npm install --legacy-peer-deps && npm run build
    startCommand: npm start
    healthCheckPath: /api/ping
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: DATABASE_URL
        fromDatabase:
          name: arabic-chat-db
          property: connectionString
    # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙˆØ§Ù„Ù€ CPU
    plan: starter
    # Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
    numInstances: 1
    
databases:
  - name: arabic-chat-db
    databaseName: arabic_chat
    user: chat_user
    region: frankfurt
    plan: starter
    
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù†Ø´Ø±
buildCommand: |
  echo "ğŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡..."
  npm install --legacy-peer-deps
  echo "ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§ÙƒØªÙ…Ù„"
  npm run build
  echo "âœ… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§ÙƒØªÙ…Ù„Øª Ø¨Ù†Ø¬Ø§Ø­"